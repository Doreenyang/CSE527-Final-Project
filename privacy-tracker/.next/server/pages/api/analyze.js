"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/analyze";
exports.ids = ["pages/api/analyze"];
exports.modules = {

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = require("axios");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("formidable");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "puppeteer":
/*!****************************!*\
  !*** external "puppeteer" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("puppeteer");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_analyze_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\analyze.ts */ \"(api)/./pages/api/analyze.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/analyze\",\n        pathname: \"/api/analyze\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_analyze_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFuYWx5emUmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2FuYWx5emUudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDcUQ7QUFDckQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGtEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxrREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcml2YWN5LXRyYWNrZXIvPzdmMzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxhbmFseXplLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYW5hbHl6ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FuYWx5emVcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./analyze.js":
/*!********************!*\
  !*** ./analyze.js ***!
  \********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\n/**\r\n * Main analysis module\r\n * Coordinates website tracking and classification\r\n */ \nconst fs = (__webpack_require__(/*! fs */ \"fs\").promises);\nconst path = __webpack_require__(/*! path */ \"path\");\nconst { trackWebsite } = __webpack_require__(/*! ./tracker */ \"(api)/./tracker.js\");\n// 开发模式下的最大网站分析数量限制\nconst MAX_WEBSITES_TO_ANALYZE = 3;\n/**\r\n * Reads websites from a file\r\n * @param {string} filePath - Path to the websites.txt file\r\n * @returns {Promise<string[]>} - Array of website URLs\r\n */ async function readWebsites(filePath) {\n    try {\n        console.log(`读取网站列表文件: ${filePath}`);\n        const content = await fs.readFile(filePath, \"utf8\");\n        const websites = content.split(\"\\n\").map((line)=>line.trim()).filter((line)=>line && !line.startsWith(\"#\"));\n        console.log(`已读取 ${websites.length} 个网站`);\n        return websites;\n    } catch (error) {\n        console.error(`Error reading website file: ${error.message}`);\n        return [];\n    }\n}\n/**\r\n * Analyzes a single website\r\n * @param {string} url - URL to analyze\r\n * @returns {Promise<Object>} - Analysis results\r\n */ async function analyzeWebsite(url) {\n    console.log(`开始分析 ${url}...`);\n    try {\n        // Normalize URL (add https:// if missing)\n        if (!url.startsWith(\"http://\") && !url.startsWith(\"https://\")) {\n            url = \"https://\" + url;\n        }\n        // Track website behavior\n        const chain = await trackWebsite(url);\n        console.log(`${url} 行为跟踪完成，收集了 ${chain.nodes.length} 个观察结果`);\n        // Classify the behavior using GPT\n        console.log(`开始使用 GPT 对 ${url} 进行分类...`);\n        const classification = await chain.classify();\n        console.log(`${url} 分类完成: ${classification.category}`);\n        return {\n            url,\n            behaviorSummary: chain.getSummary(),\n            classification: classification.category,\n            reasoning: classification.reasoning,\n            timestamp: new Date().toISOString()\n        };\n    } catch (error) {\n        console.error(`Error analyzing ${url}: ${error.message}`);\n        return {\n            url,\n            error: error.message,\n            timestamp: new Date().toISOString()\n        };\n    }\n}\n/**\r\n * Analyzes multiple websites\r\n * @param {string[]} urls - Array of URLs to analyze\r\n * @returns {Promise<Object[]>} - Array of analysis results\r\n */ async function analyzeWebsites(urls) {\n    const results = [];\n    // 限制分析的网站数量\n    const sitesToAnalyze = urls.slice(0, MAX_WEBSITES_TO_ANALYZE);\n    if (sitesToAnalyze.length < urls.length) {\n        console.log(`注意: 为了开发测试，仅分析前 ${MAX_WEBSITES_TO_ANALYZE} 个网站`);\n    }\n    for (const url of sitesToAnalyze){\n        try {\n            const result = await analyzeWebsite(url);\n            results.push(result);\n        } catch (error) {\n            console.error(`分析 ${url} 时发生致命错误:`, error);\n            results.push({\n                url,\n                error: `致命错误: ${error.message}`,\n                timestamp: new Date().toISOString()\n            });\n        }\n    }\n    return results;\n}\n/**\r\n * Main function to run analysis from file\r\n * @param {string} filePath - Path to websites.txt file\r\n * @returns {Promise<Object[]>} - Analysis results\r\n */ async function analyzeFromFile(filePath) {\n    try {\n        const websites = await readWebsites(filePath);\n        console.log(`找到 ${websites.length} 个网站需要分析`);\n        if (websites.length === 0) {\n            console.warn(\"警告: 没有找到要分析的网站\");\n            return [];\n        }\n        return await analyzeWebsites(websites);\n    } catch (error) {\n        console.error(\"分析文件时发生错误:\", error);\n        throw error; // 向上传递错误以便 API 能够捕获\n    }\n}\n// Allow direct execution via command line\nif (__webpack_require__.c[__webpack_require__.s] === module) {\n    const filePath = process.argv[2] || path.join(__dirname, \"websites.txt\");\n    analyzeFromFile(filePath).then((results)=>{\n        console.log(JSON.stringify(results, null, 2));\n    }).catch((error)=>{\n        console.error(`Analysis failed: ${error.message}`);\n        process.exit(1);\n    });\n}\nmodule.exports = {\n    readWebsites,\n    analyzeWebsite,\n    analyzeWebsites,\n    analyzeFromFile\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hbmFseXplLmpzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0NBR0M7QUFFRCxNQUFNQSxLQUFLQyw4Q0FBc0I7QUFDakMsTUFBTUUsT0FBT0YsbUJBQU9BLENBQUM7QUFDckIsTUFBTSxFQUFFRyxZQUFZLEVBQUUsR0FBR0gsbUJBQU9BLENBQUM7QUFFakMsbUJBQW1CO0FBQ25CLE1BQU1JLDBCQUEwQjtBQUVoQzs7OztDQUlDLEdBQ0QsZUFBZUMsYUFBYUMsUUFBUTtJQUNsQyxJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFVBQVUsRUFBRUYsU0FBUyxDQUFDO1FBQ25DLE1BQU1HLFVBQVUsTUFBTVYsR0FBR1csUUFBUSxDQUFDSixVQUFVO1FBQzVDLE1BQU1LLFdBQVdGLFFBQ2RHLEtBQUssQ0FBQyxNQUNOQyxHQUFHLENBQUNDLENBQUFBLE9BQVFBLEtBQUtDLElBQUksSUFDckJDLE1BQU0sQ0FBQ0YsQ0FBQUEsT0FBUUEsUUFBUSxDQUFDQSxLQUFLRyxVQUFVLENBQUM7UUFFM0NWLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRUcsU0FBU08sTUFBTSxDQUFDLElBQUksQ0FBQztRQUN4QyxPQUFPUDtJQUNULEVBQUUsT0FBT1EsT0FBTztRQUNkWixRQUFRWSxLQUFLLENBQUMsQ0FBQyw0QkFBNEIsRUFBRUEsTUFBTUMsT0FBTyxDQUFDLENBQUM7UUFDNUQsT0FBTyxFQUFFO0lBQ1g7QUFDRjtBQUVBOzs7O0NBSUMsR0FDRCxlQUFlQyxlQUFlQyxHQUFHO0lBQy9CZixRQUFRQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUVjLElBQUksR0FBRyxDQUFDO0lBRTVCLElBQUk7UUFDRiwwQ0FBMEM7UUFDMUMsSUFBSSxDQUFDQSxJQUFJTCxVQUFVLENBQUMsY0FBYyxDQUFDSyxJQUFJTCxVQUFVLENBQUMsYUFBYTtZQUM3REssTUFBTSxhQUFhQTtRQUNyQjtRQUVBLHlCQUF5QjtRQUN6QixNQUFNQyxRQUFRLE1BQU1wQixhQUFhbUI7UUFDakNmLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLEVBQUVjLElBQUksWUFBWSxFQUFFQyxNQUFNQyxLQUFLLENBQUNOLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFFM0Qsa0NBQWtDO1FBQ2xDWCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUVjLElBQUksUUFBUSxDQUFDO1FBQ3ZDLE1BQU1HLGlCQUFpQixNQUFNRixNQUFNRyxRQUFRO1FBQzNDbkIsUUFBUUMsR0FBRyxDQUFDLENBQUMsRUFBRWMsSUFBSSxPQUFPLEVBQUVHLGVBQWVFLFFBQVEsQ0FBQyxDQUFDO1FBRXJELE9BQU87WUFDTEw7WUFDQU0saUJBQWlCTCxNQUFNTSxVQUFVO1lBQ2pDSixnQkFBZ0JBLGVBQWVFLFFBQVE7WUFDdkNHLFdBQVdMLGVBQWVLLFNBQVM7WUFDbkNDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNuQztJQUNGLEVBQUUsT0FBT2QsT0FBTztRQUNkWixRQUFRWSxLQUFLLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRUcsSUFBSSxFQUFFLEVBQUVILE1BQU1DLE9BQU8sQ0FBQyxDQUFDO1FBQ3hELE9BQU87WUFDTEU7WUFDQUgsT0FBT0EsTUFBTUMsT0FBTztZQUNwQlcsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1FBQ25DO0lBQ0Y7QUFDRjtBQUVBOzs7O0NBSUMsR0FDRCxlQUFlQyxnQkFBZ0JDLElBQUk7SUFDakMsTUFBTUMsVUFBVSxFQUFFO0lBRWxCLFlBQVk7SUFDWixNQUFNQyxpQkFBaUJGLEtBQUtHLEtBQUssQ0FBQyxHQUFHbEM7SUFDckMsSUFBSWlDLGVBQWVuQixNQUFNLEdBQUdpQixLQUFLakIsTUFBTSxFQUFFO1FBQ3ZDWCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRUosd0JBQXdCLElBQUksQ0FBQztJQUM5RDtJQUVBLEtBQUssTUFBTWtCLE9BQU9lLGVBQWdCO1FBQ2hDLElBQUk7WUFDRixNQUFNRSxTQUFTLE1BQU1sQixlQUFlQztZQUNwQ2MsUUFBUUksSUFBSSxDQUFDRDtRQUNmLEVBQUUsT0FBT3BCLE9BQU87WUFDZFosUUFBUVksS0FBSyxDQUFDLENBQUMsR0FBRyxFQUFFRyxJQUFJLFNBQVMsQ0FBQyxFQUFFSDtZQUNwQ2lCLFFBQVFJLElBQUksQ0FBQztnQkFDWGxCO2dCQUNBSCxPQUFPLENBQUMsTUFBTSxFQUFFQSxNQUFNQyxPQUFPLENBQUMsQ0FBQztnQkFDL0JXLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztZQUNuQztRQUNGO0lBQ0Y7SUFFQSxPQUFPRztBQUNUO0FBRUE7Ozs7Q0FJQyxHQUNELGVBQWVLLGdCQUFnQm5DLFFBQVE7SUFDckMsSUFBSTtRQUNGLE1BQU1LLFdBQVcsTUFBTU4sYUFBYUM7UUFDcENDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRUcsU0FBU08sTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUUzQyxJQUFJUCxTQUFTTyxNQUFNLEtBQUssR0FBRztZQUN6QlgsUUFBUW1DLElBQUksQ0FBQztZQUNiLE9BQU8sRUFBRTtRQUNYO1FBRUEsT0FBTyxNQUFNUixnQkFBZ0J2QjtJQUMvQixFQUFFLE9BQU9RLE9BQU87UUFDZFosUUFBUVksS0FBSyxDQUFDLGNBQWNBO1FBQzVCLE1BQU1BLE9BQU8sb0JBQW9CO0lBQ25DO0FBQ0Y7QUFFQSwwQ0FBMEM7QUFDMUMsSUFBSW5CLDRDQUFZLEtBQUs0QyxRQUFRO0lBQzNCLE1BQU10QyxXQUFXdUMsUUFBUUMsSUFBSSxDQUFDLEVBQUUsSUFBSTVDLEtBQUs2QyxJQUFJLENBQUNDLFdBQVc7SUFFekRQLGdCQUFnQm5DLFVBQ2IyQyxJQUFJLENBQUNiLENBQUFBO1FBQ0o3QixRQUFRQyxHQUFHLENBQUMwQyxLQUFLQyxTQUFTLENBQUNmLFNBQVMsTUFBTTtJQUM1QyxHQUNDZ0IsS0FBSyxDQUFDakMsQ0FBQUE7UUFDTFosUUFBUVksS0FBSyxDQUFDLENBQUMsaUJBQWlCLEVBQUVBLE1BQU1DLE9BQU8sQ0FBQyxDQUFDO1FBQ2pEeUIsUUFBUVEsSUFBSSxDQUFDO0lBQ2Y7QUFDSjtBQUVBVCxPQUFPVSxPQUFPLEdBQUc7SUFDZmpEO0lBQ0FnQjtJQUNBYTtJQUNBTztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJpdmFjeS10cmFja2VyLy4vYW5hbHl6ZS5qcz8wYTViIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBNYWluIGFuYWx5c2lzIG1vZHVsZVxyXG4gKiBDb29yZGluYXRlcyB3ZWJzaXRlIHRyYWNraW5nIGFuZCBjbGFzc2lmaWNhdGlvblxyXG4gKi9cclxuXHJcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKS5wcm9taXNlcztcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuY29uc3QgeyB0cmFja1dlYnNpdGUgfSA9IHJlcXVpcmUoJy4vdHJhY2tlcicpO1xyXG5cclxuLy8g5byA5Y+R5qih5byP5LiL55qE5pyA5aSn572R56uZ5YiG5p6Q5pWw6YeP6ZmQ5Yi2XHJcbmNvbnN0IE1BWF9XRUJTSVRFU19UT19BTkFMWVpFID0gMztcclxuXHJcbi8qKlxyXG4gKiBSZWFkcyB3ZWJzaXRlcyBmcm9tIGEgZmlsZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGggLSBQYXRoIHRvIHRoZSB3ZWJzaXRlcy50eHQgZmlsZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmdbXT59IC0gQXJyYXkgb2Ygd2Vic2l0ZSBVUkxzXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWFkV2Vic2l0ZXMoZmlsZVBhdGgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coYOivu+WPlue9keermeWIl+ihqOaWh+S7tjogJHtmaWxlUGF0aH1gKTtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShmaWxlUGF0aCwgJ3V0ZjgnKTtcclxuICAgIGNvbnN0IHdlYnNpdGVzID0gY29udGVudFxyXG4gICAgICAuc3BsaXQoJ1xcbicpXHJcbiAgICAgIC5tYXAobGluZSA9PiBsaW5lLnRyaW0oKSlcclxuICAgICAgLmZpbHRlcihsaW5lID0+IGxpbmUgJiYgIWxpbmUuc3RhcnRzV2l0aCgnIycpKTtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coYOW3suivu+WPliAke3dlYnNpdGVzLmxlbmd0aH0g5Liq572R56uZYCk7XHJcbiAgICByZXR1cm4gd2Vic2l0ZXM7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlYWRpbmcgd2Vic2l0ZSBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQW5hbHl6ZXMgYSBzaW5nbGUgd2Vic2l0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVVJMIHRvIGFuYWx5emVcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gLSBBbmFseXNpcyByZXN1bHRzXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBhbmFseXplV2Vic2l0ZSh1cmwpIHtcclxuICBjb25zb2xlLmxvZyhg5byA5aeL5YiG5p6QICR7dXJsfS4uLmApO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICAvLyBOb3JtYWxpemUgVVJMIChhZGQgaHR0cHM6Ly8gaWYgbWlzc2luZylcclxuICAgIGlmICghdXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSAmJiAhdXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHtcclxuICAgICAgdXJsID0gJ2h0dHBzOi8vJyArIHVybDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVHJhY2sgd2Vic2l0ZSBiZWhhdmlvclxyXG4gICAgY29uc3QgY2hhaW4gPSBhd2FpdCB0cmFja1dlYnNpdGUodXJsKTtcclxuICAgIGNvbnNvbGUubG9nKGAke3VybH0g6KGM5Li66Lef6Liq5a6M5oiQ77yM5pS26ZuG5LqGICR7Y2hhaW4ubm9kZXMubGVuZ3RofSDkuKrop4Llr5/nu5PmnpxgKTtcclxuICAgIFxyXG4gICAgLy8gQ2xhc3NpZnkgdGhlIGJlaGF2aW9yIHVzaW5nIEdQVFxyXG4gICAgY29uc29sZS5sb2coYOW8gOWni+S9v+eUqCBHUFQg5a+5ICR7dXJsfSDov5vooYzliIbnsbsuLi5gKTtcclxuICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2hhaW4uY2xhc3NpZnkoKTtcclxuICAgIGNvbnNvbGUubG9nKGAke3VybH0g5YiG57G75a6M5oiQOiAke2NsYXNzaWZpY2F0aW9uLmNhdGVnb3J5fWApO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1cmwsXHJcbiAgICAgIGJlaGF2aW9yU3VtbWFyeTogY2hhaW4uZ2V0U3VtbWFyeSgpLFxyXG4gICAgICBjbGFzc2lmaWNhdGlvbjogY2xhc3NpZmljYXRpb24uY2F0ZWdvcnksXHJcbiAgICAgIHJlYXNvbmluZzogY2xhc3NpZmljYXRpb24ucmVhc29uaW5nLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgYW5hbHl6aW5nICR7dXJsfTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXJsLFxyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQW5hbHl6ZXMgbXVsdGlwbGUgd2Vic2l0ZXNcclxuICogQHBhcmFtIHtzdHJpbmdbXX0gdXJscyAtIEFycmF5IG9mIFVSTHMgdG8gYW5hbHl6ZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3RbXT59IC0gQXJyYXkgb2YgYW5hbHlzaXMgcmVzdWx0c1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gYW5hbHl6ZVdlYnNpdGVzKHVybHMpIHtcclxuICBjb25zdCByZXN1bHRzID0gW107XHJcbiAgXHJcbiAgLy8g6ZmQ5Yi25YiG5p6Q55qE572R56uZ5pWw6YePXHJcbiAgY29uc3Qgc2l0ZXNUb0FuYWx5emUgPSB1cmxzLnNsaWNlKDAsIE1BWF9XRUJTSVRFU19UT19BTkFMWVpFKTtcclxuICBpZiAoc2l0ZXNUb0FuYWx5emUubGVuZ3RoIDwgdXJscy5sZW5ndGgpIHtcclxuICAgIGNvbnNvbGUubG9nKGDms6jmhI86IOS4uuS6huW8gOWPkea1i+ivle+8jOS7heWIhuaekOWJjSAke01BWF9XRUJTSVRFU19UT19BTkFMWVpFfSDkuKrnvZHnq5lgKTtcclxuICB9XHJcbiAgXHJcbiAgZm9yIChjb25zdCB1cmwgb2Ygc2l0ZXNUb0FuYWx5emUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVXZWJzaXRlKHVybCk7XHJcbiAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihg5YiG5p6QICR7dXJsfSDml7blj5HnlJ/oh7Tlkb3plJnor686YCwgZXJyb3IpO1xyXG4gICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgIHVybCxcclxuICAgICAgICBlcnJvcjogYOiHtOWRvemUmeivrzogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiByZXN1bHRzO1xyXG59XHJcblxyXG4vKipcclxuICogTWFpbiBmdW5jdGlvbiB0byBydW4gYW5hbHlzaXMgZnJvbSBmaWxlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlUGF0aCAtIFBhdGggdG8gd2Vic2l0ZXMudHh0IGZpbGVcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0W10+fSAtIEFuYWx5c2lzIHJlc3VsdHNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGFuYWx5emVGcm9tRmlsZShmaWxlUGF0aCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB3ZWJzaXRlcyA9IGF3YWl0IHJlYWRXZWJzaXRlcyhmaWxlUGF0aCk7XHJcbiAgICBjb25zb2xlLmxvZyhg5om+5YiwICR7d2Vic2l0ZXMubGVuZ3RofSDkuKrnvZHnq5npnIDopoHliIbmnpBgKTtcclxuICAgIFxyXG4gICAgaWYgKHdlYnNpdGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+itpuWRijog5rKh5pyJ5om+5Yiw6KaB5YiG5p6Q55qE572R56uZJyk7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGF3YWl0IGFuYWx5emVXZWJzaXRlcyh3ZWJzaXRlcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+WIhuaekOaWh+S7tuaXtuWPkeeUn+mUmeivrzonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjsgLy8g5ZCR5LiK5Lyg6YCS6ZSZ6K+v5Lul5L6/IEFQSSDog73lpJ/mjZXojrdcclxuICB9XHJcbn1cclxuXHJcbi8vIEFsbG93IGRpcmVjdCBleGVjdXRpb24gdmlhIGNvbW1hbmQgbGluZVxyXG5pZiAocmVxdWlyZS5tYWluID09PSBtb2R1bGUpIHtcclxuICBjb25zdCBmaWxlUGF0aCA9IHByb2Nlc3MuYXJndlsyXSB8fCBwYXRoLmpvaW4oX19kaXJuYW1lLCAnd2Vic2l0ZXMudHh0Jyk7XHJcbiAgXHJcbiAgYW5hbHl6ZUZyb21GaWxlKGZpbGVQYXRoKVxyXG4gICAgLnRoZW4ocmVzdWx0cyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlc3VsdHMsIG51bGwsIDIpKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBBbmFseXNpcyBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIHJlYWRXZWJzaXRlcyxcclxuICBhbmFseXplV2Vic2l0ZSxcclxuICBhbmFseXplV2Vic2l0ZXMsXHJcbiAgYW5hbHl6ZUZyb21GaWxlXHJcbn07ICJdLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwcm9taXNlcyIsInBhdGgiLCJ0cmFja1dlYnNpdGUiLCJNQVhfV0VCU0lURVNfVE9fQU5BTFlaRSIsInJlYWRXZWJzaXRlcyIsImZpbGVQYXRoIiwiY29uc29sZSIsImxvZyIsImNvbnRlbnQiLCJyZWFkRmlsZSIsIndlYnNpdGVzIiwic3BsaXQiLCJtYXAiLCJsaW5lIiwidHJpbSIsImZpbHRlciIsInN0YXJ0c1dpdGgiLCJsZW5ndGgiLCJlcnJvciIsIm1lc3NhZ2UiLCJhbmFseXplV2Vic2l0ZSIsInVybCIsImNoYWluIiwibm9kZXMiLCJjbGFzc2lmaWNhdGlvbiIsImNsYXNzaWZ5IiwiY2F0ZWdvcnkiLCJiZWhhdmlvclN1bW1hcnkiLCJnZXRTdW1tYXJ5IiwicmVhc29uaW5nIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiYW5hbHl6ZVdlYnNpdGVzIiwidXJscyIsInJlc3VsdHMiLCJzaXRlc1RvQW5hbHl6ZSIsInNsaWNlIiwicmVzdWx0IiwicHVzaCIsImFuYWx5emVGcm9tRmlsZSIsIndhcm4iLCJtYWluIiwibW9kdWxlIiwicHJvY2VzcyIsImFyZ3YiLCJqb2luIiwiX19kaXJuYW1lIiwidGhlbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXRjaCIsImV4aXQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./analyze.js\n");

/***/ }),

/***/ "(api)/./gptClassifier.js":
/*!**************************!*\
  !*** ./gptClassifier.js ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/**\r\n * GPT Classifier for NoT.js\r\n * Replaces the Random Forest classifier with OpenAI's GPT model\r\n */ \n(__webpack_require__(/*! dotenv */ \"dotenv\").config)();\nconst axios = __webpack_require__(/*! axios */ \"axios\");\nconst path = __webpack_require__(/*! path */ \"path\");\nconst fs = __webpack_require__(/*! fs */ \"fs\");\n// 确保 API 密钥已加载\nlet openaiApiKey = process.env.OPENAI_API_KEY;\n// 如果环境变量未加载，尝试直接从文件读取\nif (!openaiApiKey || openaiApiKey === \"your_openai_api_key_here\") {\n    try {\n        const envContent = fs.readFileSync(path.join(process.cwd(), \".env\"), \"utf-8\");\n        const match = envContent.match(/OPENAI_API_KEY=([^\\s\\r\\n]+)/);\n        if (match && match[1]) {\n            openaiApiKey = match[1];\n            console.log(\"API key loaded from file directly\");\n        }\n    } catch (err) {\n        console.error(\"Error reading .env file:\", err.message);\n    }\n}\n/**\r\n * 使用模拟分类，当无法访问 OpenAI API 时使用\r\n */ function mockClassify(behaviorText) {\n    console.log(\"使用模拟分类器 (无法连接OpenAI)\");\n    // 基于关键词的简单规则分类\n    const trackerKeywords = [\n        \"google-analytics\",\n        \"facebook\",\n        \"pixel\",\n        \"tracker\",\n        \"跟踪器\",\n        \"读取了 cookie\",\n        \"写入了 cookie\"\n    ];\n    const hasTrackers = trackerKeywords.some((keyword)=>behaviorText.toLowerCase().includes(keyword.toLowerCase()));\n    if (hasTrackers) {\n        return {\n            category: \"B\",\n            reasoning: \"模拟分类: B. 可疑行为 - 检测到部分跟踪器或Cookie读写行为\",\n            rawBehaviors: behaviorText\n        };\n    } else {\n        return {\n            category: \"C\",\n            reasoning: \"模拟分类: C. 安全行为 - 未检测到明显的跟踪行为\",\n            rawBehaviors: behaviorText\n        };\n    }\n}\n/**\r\n * Classifies privacy behavior using ChatGPT\r\n * @param {string} behaviorText - The text containing website behaviors to analyze\r\n * @returns {Object} Classification result with category and reasoning\r\n */ async function classifyWithGPT(behaviorText) {\n    try {\n        if (!openaiApiKey || openaiApiKey === \"your_openai_api_key_here\") {\n            console.warn(\"警告: OpenAI API 密钥未设置, 使用模拟分类\");\n            return mockClassify(behaviorText);\n        }\n        console.log(\"正在使用 OpenAI API 进行分类...\");\n        const prompt = `你是隐私安全分析专家。以下是某网站行为列表，请判断其是否涉及用户隐私泄露。\r\n\r\n【行为列表】\r\n${behaviorText}\r\n\r\n请选择：\r\nA. 明显隐私泄露\r\nB. 可疑行为\r\nC. 安全行为\r\n\r\n请返回分类（A/B/C）及一句理由。`;\n        const response = await axios.post(\"https://api.openai.com/v1/chat/completions\", {\n            model: \"gpt-3.5-turbo\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"你是一个擅长分析网站隐私安全问题的专家。你的回复应简洁明了，只包含分类结果和简短理由。\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            temperature: 0.3,\n            max_tokens: 150\n        }, {\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${openaiApiKey}`\n            }\n        });\n        const result = response.data.choices[0].message.content.trim();\n        console.log(\"OpenAI 返回结果:\", result);\n        // Extract the classification (A/B/C) and reasoning\n        const classificationMatch = result.match(/^([ABC])[.\\s:]/i);\n        const category = classificationMatch ? classificationMatch[1].toUpperCase() : \"Undetermined\";\n        return {\n            category,\n            reasoning: result,\n            rawBehaviors: behaviorText\n        };\n    } catch (error) {\n        console.error(\"Error classifying with GPT:\", error.message);\n        // 当 OpenAI API 错误时使用模拟分类\n        console.log(\"切换到模拟分类\");\n        return mockClassify(behaviorText);\n    }\n}\nmodule.exports = {\n    classifyWithGPT\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ncHRDbGFzc2lmaWVyLmpzIiwibWFwcGluZ3MiOiJBQUFBOzs7Q0FHQztBQUVEQSxvREFBd0I7QUFDeEIsTUFBTUUsUUFBUUYsbUJBQU9BLENBQUM7QUFDdEIsTUFBTUcsT0FBT0gsbUJBQU9BLENBQUM7QUFDckIsTUFBTUksS0FBS0osbUJBQU9BLENBQUM7QUFFbkIsZUFBZTtBQUNmLElBQUlLLGVBQWVDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztBQUU3QyxzQkFBc0I7QUFDdEIsSUFBSSxDQUFDSCxnQkFBZ0JBLGlCQUFpQiw0QkFBNEI7SUFDaEUsSUFBSTtRQUNGLE1BQU1JLGFBQWFMLEdBQUdNLFlBQVksQ0FBQ1AsS0FBS1EsSUFBSSxDQUFDTCxRQUFRTSxHQUFHLElBQUksU0FBUztRQUNyRSxNQUFNQyxRQUFRSixXQUFXSSxLQUFLLENBQUM7UUFDL0IsSUFBSUEsU0FBU0EsS0FBSyxDQUFDLEVBQUUsRUFBRTtZQUNyQlIsZUFBZVEsS0FBSyxDQUFDLEVBQUU7WUFDdkJDLFFBQVFDLEdBQUcsQ0FBQztRQUNkO0lBQ0YsRUFBRSxPQUFPQyxLQUFLO1FBQ1pGLFFBQVFHLEtBQUssQ0FBQyw0QkFBNEJELElBQUlFLE9BQU87SUFDdkQ7QUFDRjtBQUVBOztDQUVDLEdBQ0QsU0FBU0MsYUFBYUMsWUFBWTtJQUNoQ04sUUFBUUMsR0FBRyxDQUFDO0lBRVosZUFBZTtJQUNmLE1BQU1NLGtCQUFrQjtRQUN0QjtRQUFvQjtRQUFZO1FBQVM7UUFDekM7UUFBTztRQUFjO0tBQ3RCO0lBRUQsTUFBTUMsY0FBY0QsZ0JBQWdCRSxJQUFJLENBQUNDLENBQUFBLFVBQ3ZDSixhQUFhSyxXQUFXLEdBQUdDLFFBQVEsQ0FBQ0YsUUFBUUMsV0FBVztJQUd6RCxJQUFJSCxhQUFhO1FBQ2YsT0FBTztZQUNMSyxVQUFVO1lBQ1ZDLFdBQVc7WUFDWEMsY0FBY1Q7UUFDaEI7SUFDRixPQUFPO1FBQ0wsT0FBTztZQUNMTyxVQUFVO1lBQ1ZDLFdBQVc7WUFDWEMsY0FBY1Q7UUFDaEI7SUFDRjtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNELGVBQWVVLGdCQUFnQlYsWUFBWTtJQUN6QyxJQUFJO1FBQ0YsSUFBSSxDQUFDZixnQkFBZ0JBLGlCQUFpQiw0QkFBNEI7WUFDaEVTLFFBQVFpQixJQUFJLENBQUM7WUFDYixPQUFPWixhQUFhQztRQUN0QjtRQUVBTixRQUFRQyxHQUFHLENBQUM7UUFFWixNQUFNaUIsU0FBUyxDQUFDOzs7QUFHcEIsRUFBRVosYUFBYTs7Ozs7OztrQkFPRyxDQUFDO1FBRWYsTUFBTWEsV0FBVyxNQUFNL0IsTUFBTWdDLElBQUksQ0FDL0IsOENBQ0E7WUFDRUMsT0FBTztZQUNQQyxVQUFVO2dCQUNSO29CQUNFQyxNQUFNO29CQUNOQyxTQUFTO2dCQUNYO2dCQUNBO29CQUNFRCxNQUFNO29CQUNOQyxTQUFTTjtnQkFDWDthQUNEO1lBQ0RPLGFBQWE7WUFDYkMsWUFBWTtRQUNkLEdBQ0E7WUFDRUMsU0FBUztnQkFDUCxnQkFBZ0I7Z0JBQ2hCLGlCQUFpQixDQUFDLE9BQU8sRUFBRXBDLGFBQWEsQ0FBQztZQUMzQztRQUNGO1FBR0YsTUFBTXFDLFNBQVNULFNBQVNVLElBQUksQ0FBQ0MsT0FBTyxDQUFDLEVBQUUsQ0FBQzFCLE9BQU8sQ0FBQ29CLE9BQU8sQ0FBQ08sSUFBSTtRQUM1RC9CLFFBQVFDLEdBQUcsQ0FBQyxnQkFBZ0IyQjtRQUU1QixtREFBbUQ7UUFDbkQsTUFBTUksc0JBQXNCSixPQUFPN0IsS0FBSyxDQUFDO1FBQ3pDLE1BQU1jLFdBQVdtQixzQkFBc0JBLG1CQUFtQixDQUFDLEVBQUUsQ0FBQ0MsV0FBVyxLQUFLO1FBRTlFLE9BQU87WUFDTHBCO1lBQ0FDLFdBQVdjO1lBQ1hiLGNBQWNUO1FBQ2hCO0lBQ0YsRUFBRSxPQUFPSCxPQUFPO1FBQ2RILFFBQVFHLEtBQUssQ0FBQywrQkFBK0JBLE1BQU1DLE9BQU87UUFDMUQseUJBQXlCO1FBQ3pCSixRQUFRQyxHQUFHLENBQUM7UUFDWixPQUFPSSxhQUFhQztJQUN0QjtBQUNGO0FBRUE0QixPQUFPQyxPQUFPLEdBQUc7SUFDZm5CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcml2YWN5LXRyYWNrZXIvLi9ncHRDbGFzc2lmaWVyLmpzPzUwNTUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEdQVCBDbGFzc2lmaWVyIGZvciBOb1QuanNcclxuICogUmVwbGFjZXMgdGhlIFJhbmRvbSBGb3Jlc3QgY2xhc3NpZmllciB3aXRoIE9wZW5BSSdzIEdQVCBtb2RlbFxyXG4gKi9cclxuXHJcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xyXG5jb25zdCBheGlvcyA9IHJlcXVpcmUoJ2F4aW9zJyk7XHJcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XHJcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcclxuXHJcbi8vIOehruS/nSBBUEkg5a+G6ZKl5bey5Yqg6L29XHJcbmxldCBvcGVuYWlBcGlLZXkgPSBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWTtcclxuXHJcbi8vIOWmguaenOeOr+Wig+WPmOmHj+acquWKoOi9ve+8jOWwneivleebtOaOpeS7juaWh+S7tuivu+WPllxyXG5pZiAoIW9wZW5haUFwaUtleSB8fCBvcGVuYWlBcGlLZXkgPT09ICd5b3VyX29wZW5haV9hcGlfa2V5X2hlcmUnKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGVudkNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMocGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICcuZW52JyksICd1dGYtOCcpO1xyXG4gICAgY29uc3QgbWF0Y2ggPSBlbnZDb250ZW50Lm1hdGNoKC9PUEVOQUlfQVBJX0tFWT0oW15cXHNcXHJcXG5dKykvKTtcclxuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xyXG4gICAgICBvcGVuYWlBcGlLZXkgPSBtYXRjaFsxXTtcclxuICAgICAgY29uc29sZS5sb2coJ0FQSSBrZXkgbG9hZGVkIGZyb20gZmlsZSBkaXJlY3RseScpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyAuZW52IGZpbGU6JywgZXJyLm1lc3NhZ2UpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOS9v+eUqOaooeaLn+WIhuexu++8jOW9k+aXoOazleiuv+mXriBPcGVuQUkgQVBJIOaXtuS9v+eUqFxyXG4gKi9cclxuZnVuY3Rpb24gbW9ja0NsYXNzaWZ5KGJlaGF2aW9yVGV4dCkge1xyXG4gIGNvbnNvbGUubG9nKCfkvb/nlKjmqKHmi5/liIbnsbvlmaggKOaXoOazlei/nuaOpU9wZW5BSSknKTtcclxuICBcclxuICAvLyDln7rkuo7lhbPplK7or43nmoTnroDljZXop4TliJnliIbnsbtcclxuICBjb25zdCB0cmFja2VyS2V5d29yZHMgPSBbXHJcbiAgICAnZ29vZ2xlLWFuYWx5dGljcycsICdmYWNlYm9vaycsICdwaXhlbCcsICd0cmFja2VyJyxcclxuICAgICfot5/ouKrlmagnLCAn6K+75Y+W5LqGIGNvb2tpZScsICflhpnlhaXkuoYgY29va2llJ1xyXG4gIF07XHJcbiAgXHJcbiAgY29uc3QgaGFzVHJhY2tlcnMgPSB0cmFja2VyS2V5d29yZHMuc29tZShrZXl3b3JkID0+IFxyXG4gICAgYmVoYXZpb3JUZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoa2V5d29yZC50b0xvd2VyQ2FzZSgpKVxyXG4gICk7XHJcbiAgXHJcbiAgaWYgKGhhc1RyYWNrZXJzKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjYXRlZ29yeTogJ0InLFxyXG4gICAgICByZWFzb25pbmc6ICfmqKHmi5/liIbnsbs6IEIuIOWPr+eWkeihjOS4uiAtIOajgOa1i+WIsOmDqOWIhui3n+i4quWZqOaIlkNvb2tpZeivu+WGmeihjOS4uicsXHJcbiAgICAgIHJhd0JlaGF2aW9yczogYmVoYXZpb3JUZXh0XHJcbiAgICB9O1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjYXRlZ29yeTogJ0MnLFxyXG4gICAgICByZWFzb25pbmc6ICfmqKHmi5/liIbnsbs6IEMuIOWuieWFqOihjOS4uiAtIOacquajgOa1i+WIsOaYjuaYvueahOi3n+i4quihjOS4uicsXHJcbiAgICAgIHJhd0JlaGF2aW9yczogYmVoYXZpb3JUZXh0XHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENsYXNzaWZpZXMgcHJpdmFjeSBiZWhhdmlvciB1c2luZyBDaGF0R1BUXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBiZWhhdmlvclRleHQgLSBUaGUgdGV4dCBjb250YWluaW5nIHdlYnNpdGUgYmVoYXZpb3JzIHRvIGFuYWx5emVcclxuICogQHJldHVybnMge09iamVjdH0gQ2xhc3NpZmljYXRpb24gcmVzdWx0IHdpdGggY2F0ZWdvcnkgYW5kIHJlYXNvbmluZ1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY2xhc3NpZnlXaXRoR1BUKGJlaGF2aW9yVGV4dCkge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoIW9wZW5haUFwaUtleSB8fCBvcGVuYWlBcGlLZXkgPT09ICd5b3VyX29wZW5haV9hcGlfa2V5X2hlcmUnKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybign6K2m5ZGKOiBPcGVuQUkgQVBJIOWvhumSpeacquiuvue9riwg5L2/55So5qih5ouf5YiG57G7Jyk7XHJcbiAgICAgIHJldHVybiBtb2NrQ2xhc3NpZnkoYmVoYXZpb3JUZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygn5q2j5Zyo5L2/55SoIE9wZW5BSSBBUEkg6L+b6KGM5YiG57G7Li4uJyk7XHJcbiAgICBcclxuICAgIGNvbnN0IHByb21wdCA9IGDkvaDmmK/pmpDnp4HlronlhajliIbmnpDkuJPlrrbjgILku6XkuIvmmK/mn5DnvZHnq5nooYzkuLrliJfooajvvIzor7fliKTmlq3lhbbmmK/lkKbmtonlj4rnlKjmiLfpmpDnp4Hms4TpnLLjgIJcclxuXHJcbuOAkOihjOS4uuWIl+ihqOOAkVxyXG4ke2JlaGF2aW9yVGV4dH1cclxuXHJcbuivt+mAieaLqe+8mlxyXG5BLiDmmI7mmL7pmpDnp4Hms4TpnLJcclxuQi4g5Y+v55aR6KGM5Li6XHJcbkMuIOWuieWFqOihjOS4ulxyXG5cclxu6K+36L+U5Zue5YiG57G777yIQS9CL0PvvInlj4rkuIDlj6XnkIbnlLHjgIJgO1xyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChcclxuICAgICAgJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsXHJcbiAgICAgIHtcclxuICAgICAgICBtb2RlbDogJ2dwdC0zLjUtdHVyYm8nLFxyXG4gICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxyXG4gICAgICAgICAgICBjb250ZW50OiAn5L2g5piv5LiA5Liq5pOF6ZW/5YiG5p6Q572R56uZ6ZqQ56eB5a6J5YWo6Zeu6aKY55qE5LiT5a6244CC5L2g55qE5Zue5aSN5bqU566A5rSB5piO5LqG77yM5Y+q5YyF5ZCr5YiG57G757uT5p6c5ZKM566A55+t55CG55Sx44CCJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxyXG4gICAgICAgICAgICBjb250ZW50OiBwcm9tcHRcclxuICAgICAgICAgIH1cclxuICAgICAgICBdLFxyXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjMsXHJcbiAgICAgICAgbWF4X3Rva2VuczogMTUwXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7b3BlbmFpQXBpS2V5fWBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2UuZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudC50cmltKCk7XHJcbiAgICBjb25zb2xlLmxvZygnT3BlbkFJIOi/lOWbnue7k+aenDonLCByZXN1bHQpO1xyXG4gICAgXHJcbiAgICAvLyBFeHRyYWN0IHRoZSBjbGFzc2lmaWNhdGlvbiAoQS9CL0MpIGFuZCByZWFzb25pbmdcclxuICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uTWF0Y2ggPSByZXN1bHQubWF0Y2goL14oW0FCQ10pWy5cXHM6XS9pKTtcclxuICAgIGNvbnN0IGNhdGVnb3J5ID0gY2xhc3NpZmljYXRpb25NYXRjaCA/IGNsYXNzaWZpY2F0aW9uTWF0Y2hbMV0udG9VcHBlckNhc2UoKSA6ICdVbmRldGVybWluZWQnO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjYXRlZ29yeSxcclxuICAgICAgcmVhc29uaW5nOiByZXN1bHQsXHJcbiAgICAgIHJhd0JlaGF2aW9yczogYmVoYXZpb3JUZXh0XHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbGFzc2lmeWluZyB3aXRoIEdQVDonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIC8vIOW9kyBPcGVuQUkgQVBJIOmUmeivr+aXtuS9v+eUqOaooeaLn+WIhuexu1xyXG4gICAgY29uc29sZS5sb2coJ+WIh+aNouWIsOaooeaLn+WIhuexuycpO1xyXG4gICAgcmV0dXJuIG1vY2tDbGFzc2lmeShiZWhhdmlvclRleHQpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgY2xhc3NpZnlXaXRoR1BUXHJcbn07ICJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiYXhpb3MiLCJwYXRoIiwiZnMiLCJvcGVuYWlBcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJlbnZDb250ZW50IiwicmVhZEZpbGVTeW5jIiwiam9pbiIsImN3ZCIsIm1hdGNoIiwiY29uc29sZSIsImxvZyIsImVyciIsImVycm9yIiwibWVzc2FnZSIsIm1vY2tDbGFzc2lmeSIsImJlaGF2aW9yVGV4dCIsInRyYWNrZXJLZXl3b3JkcyIsImhhc1RyYWNrZXJzIiwic29tZSIsImtleXdvcmQiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiY2F0ZWdvcnkiLCJyZWFzb25pbmciLCJyYXdCZWhhdmlvcnMiLCJjbGFzc2lmeVdpdGhHUFQiLCJ3YXJuIiwicHJvbXB0IiwicmVzcG9uc2UiLCJwb3N0IiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwiaGVhZGVycyIsInJlc3VsdCIsImRhdGEiLCJjaG9pY2VzIiwidHJpbSIsImNsYXNzaWZpY2F0aW9uTWF0Y2giLCJ0b1VwcGVyQ2FzZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./gptClassifier.js\n");

/***/ }),

/***/ "(api)/./not.js":
/*!****************!*\
  !*** ./not.js ***!
  \****************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/**\r\n * NoT.js - Network of Thoughts JavaScript implementation\r\n * This is a simplified version of NoT.js that implements ThoughtNode and ThoughtChain\r\n */ \nclass ThoughtNode {\n    constructor(type, content, metadata = {}){\n        this.type = type; // Type of the observation (e.g., 'request', 'cookie', 'script')\n        this.content = content; // Description of the observation\n        this.metadata = metadata; // Additional data about the observation\n        this.timestamp = Date.now();\n    }\n    toString() {\n        return `[${this.type}] ${this.content}`;\n    }\n}\nclass ThoughtChain {\n    constructor(name){\n        this.name = name;\n        this.nodes = [];\n    }\n    addNode(node) {\n        this.nodes.push(node);\n        return this;\n    }\n    // Original method (to be replaced)\n    // classify() {\n    //   return rf.predict(this.nodes);\n    // }\n    // New method using GPT as classifier\n    async classify() {\n        // This will be implemented to use GPT instead of Random Forest\n        const { classifyWithGPT } = __webpack_require__(/*! ./gptClassifier */ \"(api)/./gptClassifier.js\");\n        const text = this.nodes.map((n)=>`${n.toString()}`).join(\"\\n\");\n        return await classifyWithGPT(text);\n    }\n    // Get a formatted summary of all nodes\n    getSummary() {\n        return this.nodes.map((node, index)=>`${index + 1}. ${node.toString()}`).join(\"\\n\");\n    }\n}\nmodule.exports = {\n    ThoughtNode,\n    ThoughtChain\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub3QuanMiLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDO0FBRUQsTUFBTUE7SUFDSkMsWUFBWUMsSUFBSSxFQUFFQyxPQUFPLEVBQUVDLFdBQVcsQ0FBQyxDQUFDLENBQUU7UUFDeEMsSUFBSSxDQUFDRixJQUFJLEdBQUdBLE1BQVksZ0VBQWdFO1FBQ3hGLElBQUksQ0FBQ0MsT0FBTyxHQUFHQSxTQUFTLGlDQUFpQztRQUN6RCxJQUFJLENBQUNDLFFBQVEsR0FBR0EsVUFBVSx3Q0FBd0M7UUFDbEUsSUFBSSxDQUFDQyxTQUFTLEdBQUdDLEtBQUtDLEdBQUc7SUFDM0I7SUFFQUMsV0FBVztRQUNULE9BQU8sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDTixJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQ0MsT0FBTyxDQUFDLENBQUM7SUFDekM7QUFDRjtBQUVBLE1BQU1NO0lBQ0pSLFlBQVlTLElBQUksQ0FBRTtRQUNoQixJQUFJLENBQUNBLElBQUksR0FBR0E7UUFDWixJQUFJLENBQUNDLEtBQUssR0FBRyxFQUFFO0lBQ2pCO0lBRUFDLFFBQVFDLElBQUksRUFBRTtRQUNaLElBQUksQ0FBQ0YsS0FBSyxDQUFDRyxJQUFJLENBQUNEO1FBQ2hCLE9BQU8sSUFBSTtJQUNiO0lBRUEsbUNBQW1DO0lBQ25DLGVBQWU7SUFDZixtQ0FBbUM7SUFDbkMsSUFBSTtJQUVKLHFDQUFxQztJQUNyQyxNQUFNRSxXQUFXO1FBQ2YsK0RBQStEO1FBQy9ELE1BQU0sRUFBRUMsZUFBZSxFQUFFLEdBQUdDLG1CQUFPQSxDQUFDO1FBQ3BDLE1BQU1DLE9BQU8sSUFBSSxDQUFDUCxLQUFLLENBQUNRLEdBQUcsQ0FBQ0MsQ0FBQUEsSUFBSyxDQUFDLEVBQUVBLEVBQUVaLFFBQVEsR0FBRyxDQUFDLEVBQUVhLElBQUksQ0FBQztRQUN6RCxPQUFPLE1BQU1MLGdCQUFnQkU7SUFDL0I7SUFFQSx1Q0FBdUM7SUFDdkNJLGFBQWE7UUFDWCxPQUFPLElBQUksQ0FBQ1gsS0FBSyxDQUFDUSxHQUFHLENBQUMsQ0FBQ04sTUFBTVUsUUFDM0IsQ0FBQyxFQUFFQSxRQUFRLEVBQUUsRUFBRSxFQUFFVixLQUFLTCxRQUFRLEdBQUcsQ0FBQyxFQUNsQ2EsSUFBSSxDQUFDO0lBQ1Q7QUFDRjtBQUVBRyxPQUFPQyxPQUFPLEdBQUc7SUFDZnpCO0lBQ0FTO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcml2YWN5LXRyYWNrZXIvLi9ub3QuanM/OGYwNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTm9ULmpzIC0gTmV0d29yayBvZiBUaG91Z2h0cyBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uXHJcbiAqIFRoaXMgaXMgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgTm9ULmpzIHRoYXQgaW1wbGVtZW50cyBUaG91Z2h0Tm9kZSBhbmQgVGhvdWdodENoYWluXHJcbiAqL1xyXG5cclxuY2xhc3MgVGhvdWdodE5vZGUge1xyXG4gIGNvbnN0cnVjdG9yKHR5cGUsIGNvbnRlbnQsIG1ldGFkYXRhID0ge30pIHtcclxuICAgIHRoaXMudHlwZSA9IHR5cGU7ICAgICAgIC8vIFR5cGUgb2YgdGhlIG9ic2VydmF0aW9uIChlLmcuLCAncmVxdWVzdCcsICdjb29raWUnLCAnc2NyaXB0JylcclxuICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7IC8vIERlc2NyaXB0aW9uIG9mIHRoZSBvYnNlcnZhdGlvblxyXG4gICAgdGhpcy5tZXRhZGF0YSA9IG1ldGFkYXRhOyAvLyBBZGRpdGlvbmFsIGRhdGEgYWJvdXQgdGhlIG9ic2VydmF0aW9uXHJcbiAgICB0aGlzLnRpbWVzdGFtcCA9IERhdGUubm93KCk7XHJcbiAgfVxyXG5cclxuICB0b1N0cmluZygpIHtcclxuICAgIHJldHVybiBgWyR7dGhpcy50eXBlfV0gJHt0aGlzLmNvbnRlbnR9YDtcclxuICB9XHJcbn1cclxuXHJcbmNsYXNzIFRob3VnaHRDaGFpbiB7XHJcbiAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMubm9kZXMgPSBbXTtcclxuICB9XHJcblxyXG4gIGFkZE5vZGUobm9kZSkge1xyXG4gICAgdGhpcy5ub2Rlcy5wdXNoKG5vZGUpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICAvLyBPcmlnaW5hbCBtZXRob2QgKHRvIGJlIHJlcGxhY2VkKVxyXG4gIC8vIGNsYXNzaWZ5KCkge1xyXG4gIC8vICAgcmV0dXJuIHJmLnByZWRpY3QodGhpcy5ub2Rlcyk7XHJcbiAgLy8gfVxyXG5cclxuICAvLyBOZXcgbWV0aG9kIHVzaW5nIEdQVCBhcyBjbGFzc2lmaWVyXHJcbiAgYXN5bmMgY2xhc3NpZnkoKSB7XHJcbiAgICAvLyBUaGlzIHdpbGwgYmUgaW1wbGVtZW50ZWQgdG8gdXNlIEdQVCBpbnN0ZWFkIG9mIFJhbmRvbSBGb3Jlc3RcclxuICAgIGNvbnN0IHsgY2xhc3NpZnlXaXRoR1BUIH0gPSByZXF1aXJlKCcuL2dwdENsYXNzaWZpZXInKTtcclxuICAgIGNvbnN0IHRleHQgPSB0aGlzLm5vZGVzLm1hcChuID0+IGAke24udG9TdHJpbmcoKX1gKS5qb2luKCdcXG4nKTtcclxuICAgIHJldHVybiBhd2FpdCBjbGFzc2lmeVdpdGhHUFQodGV4dCk7XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgYSBmb3JtYXR0ZWQgc3VtbWFyeSBvZiBhbGwgbm9kZXNcclxuICBnZXRTdW1tYXJ5KCkge1xyXG4gICAgcmV0dXJuIHRoaXMubm9kZXMubWFwKChub2RlLCBpbmRleCkgPT4gXHJcbiAgICAgIGAke2luZGV4ICsgMX0uICR7bm9kZS50b1N0cmluZygpfWBcclxuICAgICkuam9pbignXFxuJyk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBUaG91Z2h0Tm9kZSxcclxuICBUaG91Z2h0Q2hhaW5cclxufTsgIl0sIm5hbWVzIjpbIlRob3VnaHROb2RlIiwiY29uc3RydWN0b3IiLCJ0eXBlIiwiY29udGVudCIsIm1ldGFkYXRhIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwiVGhvdWdodENoYWluIiwibmFtZSIsIm5vZGVzIiwiYWRkTm9kZSIsIm5vZGUiLCJwdXNoIiwiY2xhc3NpZnkiLCJjbGFzc2lmeVdpdGhHUFQiLCJyZXF1aXJlIiwidGV4dCIsIm1hcCIsIm4iLCJqb2luIiwiZ2V0U3VtbWFyeSIsImluZGV4IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./not.js\n");

/***/ }),

/***/ "(api)/./pages/api/analyze.ts":
/*!******************************!*\
  !*** ./pages/api/analyze.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(formidable__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _analyze__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../analyze */ \"(api)/./analyze.js\");\n/* harmony import */ var _analyze__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_analyze__WEBPACK_IMPORTED_MODULE_3__);\n/**\r\n * API endpoint for website privacy analysis\r\n */ \n\n// 修改导入方式，导入正确的类型和函数\n\n// 导入 TypeScript 版本的 analyzeFromFile\n\n// Disable the default body parser to handle form data\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n/**\r\n * Parse form data from the request\r\n */ function parseForm(req) {\n    return new Promise((resolve, reject)=>{\n        // 使用 formidable v2.x 的方式创建 form 对象\n        const form = new formidable__WEBPACK_IMPORTED_MODULE_2__.IncomingForm({\n            keepExtensions: true,\n            maxFileSize: 10 * 1024 * 1024\n        });\n        form.parse(req, (err, fields, files)=>{\n            if (err) return reject(err);\n            resolve({\n                fields,\n                files\n            });\n        });\n    });\n}\n/**\r\n * Handle the website analysis request\r\n */ async function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        console.log(\"API start: 正在处理分析请求...\");\n        // Parse the form data\n        const { files } = await parseForm(req);\n        console.log(\"文件解析完成\", files ? \"文件存在\" : \"文件不存在\");\n        // 在 formidable v2 中，files[fieldname] 是单个文件对象或对象数组\n        const websitesFile = files.websites;\n        console.log(\"网站文件类型:\", typeof websitesFile, Array.isArray(websitesFile));\n        // 更详细的调试信息\n        if (websitesFile) {\n            console.log(\"文件对象结构:\", JSON.stringify(websitesFile, null, 2).substring(0, 200) + \"...\");\n        }\n        // 适配 formidable v2 的文件对象结构\n        let filePath;\n        // 处理文件对象可能的不同结构\n        if (Array.isArray(websitesFile)) {\n            // 如果是数组（多文件）\n            if (websitesFile.length === 0) {\n                return res.status(400).json({\n                    error: \"No websites file provided (empty array)\"\n                });\n            }\n            filePath = websitesFile[0].filepath;\n        } else if (websitesFile && typeof websitesFile === \"object\" && \"filepath\" in websitesFile) {\n            // 如果是单个文件对象\n            filePath = websitesFile.filepath;\n        } else {\n            console.error(\"无效的文件对象:\", websitesFile);\n            return res.status(400).json({\n                error: \"No valid websites file provided\"\n            });\n        }\n        console.log(\"网站文件路径:\", filePath);\n        // Save the file temporarily\n        const tempFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"temp_websites.txt\");\n        await fs__WEBPACK_IMPORTED_MODULE_0__.promises.copyFile(filePath, tempFilePath);\n        console.log(\"临时文件已创建:\", tempFilePath);\n        try {\n            // 读取临时文件内容进行验证\n            const fileContent = await fs__WEBPACK_IMPORTED_MODULE_0__.promises.readFile(tempFilePath, \"utf-8\");\n            console.log(\"文件内容预览:\", fileContent.slice(0, 100) + \"...\");\n            // Analyze the websites\n            console.log(\"开始分析网站...\");\n            const results = await (0,_analyze__WEBPACK_IMPORTED_MODULE_3__.analyzeFromFile)(tempFilePath);\n            console.log(\"分析完成，结果数量:\", Array.isArray(results) ? results.length : \"非数组\");\n            // Clean up the temporary file\n            await fs__WEBPACK_IMPORTED_MODULE_0__.promises.unlink(tempFilePath);\n            console.log(\"临时文件已删除\");\n            // Return the results\n            return res.status(200).json({\n                results\n            });\n        } catch (innerError) {\n            console.error(\"分析过程内部错误:\", innerError);\n            throw innerError;\n        }\n    } catch (error) {\n        console.error(\"API error:\", error);\n        console.error(\"错误详情:\", error instanceof Error ? error.stack : String(error));\n        return res.status(500).json({\n            error: \"Analysis failed\",\n            details: error instanceof Error ? error.message : String(error),\n            stack: error instanceof Error ? error.stack : undefined\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V0FBV0EsUUFBUVYsTUFBTSxHQUFHO1lBRXBFLDhCQUE4QjtZQUM5QixNQUFNbkMsd0NBQVVBLENBQUM4QyxNQUFNLENBQUNUO1lBQ3hCWixRQUFRQyxHQUFHLENBQUM7WUFFWixxQkFBcUI7WUFDckIsT0FBT04sSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRXNCO1lBQVE7UUFDeEMsRUFBRSxPQUFPRSxZQUFZO1lBQ25CdEIsUUFBUUQsS0FBSyxDQUFDLGFBQWF1QjtZQUMzQixNQUFNQTtRQUNSO0lBQ0YsRUFBRSxPQUFPdkIsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsY0FBY0E7UUFDNUJDLFFBQVFELEtBQUssQ0FBQyxTQUFTQSxpQkFBaUJ3QixRQUFReEIsTUFBTXlCLEtBQUssR0FBR0MsT0FBTzFCO1FBQ3JFLE9BQU9KLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLE9BQU87WUFDUDJCLFNBQVMzQixpQkFBaUJ3QixRQUFReEIsTUFBTTRCLE9BQU8sR0FBR0YsT0FBTzFCO1lBQ3pEeUIsT0FBT3pCLGlCQUFpQndCLFFBQVF4QixNQUFNeUIsS0FBSyxHQUFHSTtRQUNoRDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcml2YWN5LXRyYWNrZXIvLi9wYWdlcy9hcGkvYW5hbHl6ZS50cz84YjAyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBBUEkgZW5kcG9pbnQgZm9yIHdlYnNpdGUgcHJpdmFjeSBhbmFseXNpc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0IHsgcHJvbWlzZXMgYXMgZnNQcm9taXNlcyB9IGZyb20gJ2ZzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcbi8vIOS/ruaUueWvvOWFpeaWueW8j++8jOWvvOWFpeato+ehrueahOexu+Wei+WSjOWHveaVsFxyXG5pbXBvcnQgeyBJbmNvbWluZ0Zvcm0sIEZpbGUsIEZpZWxkcywgRmlsZXMgfSBmcm9tICdmb3JtaWRhYmxlJztcclxuLy8g5a+85YWlIFR5cGVTY3JpcHQg54mI5pys55qEIGFuYWx5emVGcm9tRmlsZVxyXG5pbXBvcnQgeyBhbmFseXplRnJvbUZpbGUgfSBmcm9tICcuLi8uLi9hbmFseXplJztcclxuXHJcbi8vIERpc2FibGUgdGhlIGRlZmF1bHQgYm9keSBwYXJzZXIgdG8gaGFuZGxlIGZvcm0gZGF0YVxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIGFwaToge1xyXG4gICAgYm9keVBhcnNlcjogZmFsc2UsXHJcbiAgfSxcclxufTtcclxuXHJcbmludGVyZmFjZSBGb3JtaWRhYmxlUmVzdWx0IHtcclxuICBmaWVsZHM6IEZpZWxkcztcclxuICBmaWxlczogRmlsZXM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQYXJzZSBmb3JtIGRhdGEgZnJvbSB0aGUgcmVxdWVzdFxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VGb3JtKHJlcTogTmV4dEFwaVJlcXVlc3QpOiBQcm9taXNlPEZvcm1pZGFibGVSZXN1bHQ+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgLy8g5L2/55SoIGZvcm1pZGFibGUgdjIueCDnmoTmlrnlvI/liJvlu7ogZm9ybSDlr7nosaFcclxuICAgIGNvbnN0IGZvcm0gPSBuZXcgSW5jb21pbmdGb3JtKHtcclxuICAgICAga2VlcEV4dGVuc2lvbnM6IHRydWUsXHJcbiAgICAgIG1heEZpbGVTaXplOiAxMCAqIDEwMjQgKiAxMDI0LCAvLyAxME1CXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgZm9ybS5wYXJzZShyZXEsIChlcnIsIGZpZWxkcywgZmlsZXMpID0+IHtcclxuICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpO1xyXG4gICAgICByZXNvbHZlKHsgZmllbGRzLCBmaWxlcyB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogSGFuZGxlIHRoZSB3ZWJzaXRlIGFuYWx5c2lzIHJlcXVlc3RcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ0FQSSBzdGFydDog5q2j5Zyo5aSE55CG5YiG5p6Q6K+35rGCLi4uJyk7XHJcbiAgICBcclxuICAgIC8vIFBhcnNlIHRoZSBmb3JtIGRhdGFcclxuICAgIGNvbnN0IHsgZmlsZXMgfSA9IGF3YWl0IHBhcnNlRm9ybShyZXEpO1xyXG4gICAgY29uc29sZS5sb2coJ+aWh+S7tuino+aekOWujOaIkCcsIGZpbGVzID8gJ+aWh+S7tuWtmOWcqCcgOiAn5paH5Lu25LiN5a2Y5ZyoJyk7XHJcbiAgICBcclxuICAgIC8vIOWcqCBmb3JtaWRhYmxlIHYyIOS4re+8jGZpbGVzW2ZpZWxkbmFtZV0g5piv5Y2V5Liq5paH5Lu25a+56LGh5oiW5a+56LGh5pWw57uEXHJcbiAgICBjb25zdCB3ZWJzaXRlc0ZpbGUgPSBmaWxlcy53ZWJzaXRlcztcclxuICAgIGNvbnNvbGUubG9nKCfnvZHnq5nmlofku7bnsbvlnos6JywgdHlwZW9mIHdlYnNpdGVzRmlsZSwgQXJyYXkuaXNBcnJheSh3ZWJzaXRlc0ZpbGUpKTtcclxuICAgIFxyXG4gICAgLy8g5pu06K+m57uG55qE6LCD6K+V5L+h5oGvXHJcbiAgICBpZiAod2Vic2l0ZXNGaWxlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfmlofku7blr7nosaHnu5PmnoQ6JywgSlNPTi5zdHJpbmdpZnkod2Vic2l0ZXNGaWxlLCBudWxsLCAyKS5zdWJzdHJpbmcoMCwgMjAwKSArICcuLi4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDpgILphY0gZm9ybWlkYWJsZSB2MiDnmoTmlofku7blr7nosaHnu5PmnoRcclxuICAgIGxldCBmaWxlUGF0aDogc3RyaW5nO1xyXG4gICAgXHJcbiAgICAvLyDlpITnkIbmlofku7blr7nosaHlj6/og73nmoTkuI3lkIznu5PmnoRcclxuICAgIGlmIChBcnJheS5pc0FycmF5KHdlYnNpdGVzRmlsZSkpIHtcclxuICAgICAgLy8g5aaC5p6c5piv5pWw57uE77yI5aSa5paH5Lu277yJXHJcbiAgICAgIGlmICh3ZWJzaXRlc0ZpbGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyB3ZWJzaXRlcyBmaWxlIHByb3ZpZGVkIChlbXB0eSBhcnJheSknIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGZpbGVQYXRoID0gd2Vic2l0ZXNGaWxlWzBdLmZpbGVwYXRoO1xyXG4gICAgfSBlbHNlIGlmICh3ZWJzaXRlc0ZpbGUgJiYgdHlwZW9mIHdlYnNpdGVzRmlsZSA9PT0gJ29iamVjdCcgJiYgJ2ZpbGVwYXRoJyBpbiB3ZWJzaXRlc0ZpbGUpIHtcclxuICAgICAgLy8g5aaC5p6c5piv5Y2V5Liq5paH5Lu25a+56LGhXHJcbiAgICAgIGZpbGVQYXRoID0gd2Vic2l0ZXNGaWxlLmZpbGVwYXRoO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5lcnJvcign5peg5pWI55qE5paH5Lu25a+56LGhOicsIHdlYnNpdGVzRmlsZSk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm8gdmFsaWQgd2Vic2l0ZXMgZmlsZSBwcm92aWRlZCcgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ+e9keermeaWh+S7tui3r+W+hDonLCBmaWxlUGF0aCk7XHJcbiAgICBcclxuICAgIC8vIFNhdmUgdGhlIGZpbGUgdGVtcG9yYXJpbHlcclxuICAgIGNvbnN0IHRlbXBGaWxlUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAndGVtcF93ZWJzaXRlcy50eHQnKTtcclxuICAgIGF3YWl0IGZzUHJvbWlzZXMuY29weUZpbGUoZmlsZVBhdGgsIHRlbXBGaWxlUGF0aCk7XHJcbiAgICBjb25zb2xlLmxvZygn5Li05pe25paH5Lu25bey5Yib5bu6OicsIHRlbXBGaWxlUGF0aCk7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOivu+WPluS4tOaXtuaWh+S7tuWGheWuuei/m+ihjOmqjOivgVxyXG4gICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IGZzUHJvbWlzZXMucmVhZEZpbGUodGVtcEZpbGVQYXRoLCAndXRmLTgnKTtcclxuICAgICAgY29uc29sZS5sb2coJ+aWh+S7tuWGheWuuemihOiniDonLCBmaWxlQ29udGVudC5zbGljZSgwLCAxMDApICsgJy4uLicpO1xyXG4gICAgICBcclxuICAgICAgLy8gQW5hbHl6ZSB0aGUgd2Vic2l0ZXNcclxuICAgICAgY29uc29sZS5sb2coJ+W8gOWni+WIhuaekOe9keermS4uLicpO1xyXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgYW5hbHl6ZUZyb21GaWxlKHRlbXBGaWxlUGF0aCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfliIbmnpDlrozmiJDvvIznu5PmnpzmlbDph486JywgQXJyYXkuaXNBcnJheShyZXN1bHRzKSA/IHJlc3VsdHMubGVuZ3RoIDogJ+mdnuaVsOe7hCcpO1xyXG4gIFxyXG4gICAgICAvLyBDbGVhbiB1cCB0aGUgdGVtcG9yYXJ5IGZpbGVcclxuICAgICAgYXdhaXQgZnNQcm9taXNlcy51bmxpbmsodGVtcEZpbGVQYXRoKTtcclxuICAgICAgY29uc29sZS5sb2coJ+S4tOaXtuaWh+S7tuW3suWIoOmZpCcpO1xyXG4gIFxyXG4gICAgICAvLyBSZXR1cm4gdGhlIHJlc3VsdHNcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcmVzdWx0cyB9KTtcclxuICAgIH0gY2F0Y2ggKGlubmVyRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign5YiG5p6Q6L+H56iL5YaF6YOo6ZSZ6K+vOicsIGlubmVyRXJyb3IpO1xyXG4gICAgICB0aHJvdyBpbm5lckVycm9yO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdBUEkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgY29uc29sZS5lcnJvcign6ZSZ6K+v6K+m5oOFOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IFN0cmluZyhlcnJvcikpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXHJcbiAgICAgIGVycm9yOiAnQW5hbHlzaXMgZmFpbGVkJyxcclxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxyXG4gICAgICBzdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXHJcbiAgICB9KTtcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbInByb21pc2VzIiwiZnNQcm9taXNlcyIsInBhdGgiLCJJbmNvbWluZ0Zvcm0iLCJhbmFseXplRnJvbUZpbGUiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwicGFyc2VGb3JtIiwicmVxIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmb3JtIiwia2VlcEV4dGVuc2lvbnMiLCJtYXhGaWxlU2l6ZSIsInBhcnNlIiwiZXJyIiwiZmllbGRzIiwiZmlsZXMiLCJoYW5kbGVyIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsImxvZyIsIndlYnNpdGVzRmlsZSIsIndlYnNpdGVzIiwiQXJyYXkiLCJpc0FycmF5IiwiSlNPTiIsInN0cmluZ2lmeSIsInN1YnN0cmluZyIsImZpbGVQYXRoIiwibGVuZ3RoIiwiZmlsZXBhdGgiLCJ0ZW1wRmlsZVBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImNvcHlGaWxlIiwiZmlsZUNvbnRlbnQiLCJyZWFkRmlsZSIsInNsaWNlIiwicmVzdWx0cyIsInVubGluayIsImlubmVyRXJyb3IiLCJFcnJvciIsInN0YWNrIiwiU3RyaW5nIiwiZGV0YWlscyIsIm1lc3NhZ2UiLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/analyze.ts\n");

/***/ }),

/***/ "(api)/./tracker.js":
/*!********************!*\
  !*** ./tracker.js ***!
  \********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/**\r\n * Website Tracker Module\r\n * Uses Puppeteer to track website behaviors related to privacy\r\n */ \nlet puppeteer;\ntry {\n    puppeteer = __webpack_require__(/*! puppeteer */ \"puppeteer\");\n} catch (err) {\n    console.error(\"Puppeteer 加载失败:\", err.message);\n}\nconst { ThoughtNode, ThoughtChain } = __webpack_require__(/*! ./not */ \"(api)/./not.js\");\n/**\r\n * 简化版的网站跟踪，当 Puppeteer 无法正常工作时使用\r\n */ async function simplifiedTrack(url) {\n    console.log(\"使用简化版跟踪功能 (Puppeteer可能不可用)\");\n    const chain = new ThoughtChain(url);\n    // 添加模拟的行为节点\n    chain.addNode(new ThoughtNode(\"navigation\", `访问网站 ${url}`, {\n        url\n    }));\n    chain.addNode(new ThoughtNode(\"request\", `模拟: 页面可能请求了跟踪器`, {\n        url: url + \"/tracking\"\n    }));\n    chain.addNode(new ThoughtNode(\"cookie\", \"模拟: 脚本可能读取了 document.cookie\", {\n        action: \"read\"\n    }));\n    // 根据网站域名添加一些特定的行为\n    if (url.includes(\"google\")) {\n        chain.addNode(new ThoughtNode(\"script\", \"模拟: 页面加载了 Google Analytics\", {\n            url: \"https://www.google-analytics.com/analytics.js\"\n        }));\n    } else if (url.includes(\"facebook\")) {\n        chain.addNode(new ThoughtNode(\"script\", \"模拟: 页面加载了 Facebook Pixel 或 SDK\", {\n            url: \"https://connect.facebook.net/signals/config/\"\n        }));\n    } else if (url.includes(\"news\") || url.includes(\"blog\")) {\n        chain.addNode(new ThoughtNode(\"script\", \"模拟: 页面加载了广告跟踪器\", {\n            url: \"https://ads-tracking.com\"\n        }));\n    }\n    chain.addNode(new ThoughtNode(\"storage\", \"模拟: 网站可能使用 localStorage 存储数据\", {\n        type: \"localStorage\",\n        itemCount: 5\n    }));\n    return chain;\n}\n/**\r\n * Track a single website and collect privacy-related behaviors\r\n * @param {string} url - URL of the website to track\r\n * @returns {Promise<ThoughtChain>} - Chain of observed behaviors\r\n */ async function trackWebsite(url) {\n    // 如果 Puppeteer 不可用，使用简化版跟踪\n    if (!puppeteer) {\n        console.warn(\"Puppeteer 不可用，使用简化版跟踪功能\");\n        return simplifiedTrack(url);\n    }\n    console.log(`开始跟踪网站: ${url}`);\n    const chain = new ThoughtChain(url);\n    let browser;\n    try {\n        browser = await puppeteer.launch({\n            headless: true,\n            args: [\n                \"--no-sandbox\",\n                \"--disable-setuid-sandbox\",\n                \"--disable-dev-shm-usage\",\n                \"--disable-accelerated-2d-canvas\",\n                \"--disable-gpu\"\n            ]\n        });\n        const page = await browser.newPage();\n        // Track network requests\n        page.on(\"request\", (request)=>{\n            const url = request.url();\n            // Filter for tracking and analytics requests\n            const trackerPatterns = [\n                /google-analytics/i,\n                /facebook/i,\n                /fb\\.com/i,\n                /doubleclick/i,\n                /tracking/i,\n                /analytics/i,\n                /pixel/i,\n                /tracker/i,\n                /beacon/i,\n                /collect/i,\n                /telemetry/i\n            ];\n            if (trackerPatterns.some((pattern)=>pattern.test(url))) {\n                chain.addNode(new ThoughtNode(\"request\", `页面请求了跟踪器 ${url}`, {\n                    url\n                }));\n            }\n        });\n        // Track cookies\n        const cookieAccessDetectionScript = `\r\n      (function() {\r\n        const originalDocumentCookie = Object.getOwnPropertyDescriptor(Document.prototype, 'cookie');\r\n        \r\n        Object.defineProperty(document, 'cookie', {\r\n          get: function() {\r\n            window.cookieRead = true;\r\n            return originalDocumentCookie.get.call(this);\r\n          },\r\n          set: function(val) {\r\n            window.cookieWritten = true;\r\n            return originalDocumentCookie.set.call(this, val);\r\n          }\r\n        });\r\n      })();\r\n    `;\n        await page.evaluateOnNewDocument(cookieAccessDetectionScript);\n        // Navigate to the URL\n        chain.addNode(new ThoughtNode(\"navigation\", `访问网站 ${url}`, {\n            url\n        }));\n        console.log(`正在访问 ${url}...`);\n        try {\n            await page.goto(url, {\n                waitUntil: \"networkidle2\",\n                timeout: 30000\n            });\n        } catch (navError) {\n            console.warn(`导航到 ${url} 时超时或错误: ${navError.message}`);\n            // 即使导航失败也继续检测\n            chain.addNode(new ThoughtNode(\"error\", `导航到网站失败: ${navError.message}`, {\n                error: true\n            }));\n        }\n        // Wait a bit more for any deferred scripts\n        await new Promise((resolve)=>setTimeout(resolve, 5000));\n        // Check for cookie access\n        const cookieActivity = await page.evaluate(()=>{\n            return {\n                cookieRead: window.cookieRead || false,\n                cookieWritten: window.cookieWritten || false\n            };\n        });\n        if (cookieActivity.cookieRead) {\n            chain.addNode(new ThoughtNode(\"cookie\", \"脚本读取了 document.cookie\", {\n                action: \"read\"\n            }));\n        }\n        if (cookieActivity.cookieWritten) {\n            chain.addNode(new ThoughtNode(\"cookie\", \"脚本写入了 document.cookie\", {\n                action: \"write\"\n            }));\n        }\n        // Check for localStorage and sessionStorage access\n        const storageActivity = await page.evaluate(()=>{\n            // Override Storage prototype methods to detect usage\n            let localStorageAccessed = false;\n            let sessionStorageAccessed = false;\n            // Check for existing values\n            const localStorageItems = Object.keys(localStorage).length;\n            const sessionStorageItems = Object.keys(sessionStorage).length;\n            return {\n                localStorageItems,\n                sessionStorageItems\n            };\n        });\n        if (storageActivity.localStorageItems > 0) {\n            chain.addNode(new ThoughtNode(\"storage\", `网站使用 localStorage 存储了 ${storageActivity.localStorageItems} 项数据`, {\n                type: \"localStorage\",\n                itemCount: storageActivity.localStorageItems\n            }));\n        }\n        if (storageActivity.sessionStorageItems > 0) {\n            chain.addNode(new ThoughtNode(\"storage\", `网站使用 sessionStorage 存储了 ${storageActivity.sessionStorageItems} 项数据`, {\n                type: \"sessionStorage\",\n                itemCount: storageActivity.sessionStorageItems\n            }));\n        }\n        // Detect third-party scripts\n        const thirdPartyScripts = await page.evaluate(()=>{\n            return Array.from(document.getElementsByTagName(\"script\")).filter((script)=>script.src).map((script)=>script.src);\n        });\n        const knownTrackers = {\n            \"facebook\": \"Facebook Pixel 或 SDK\",\n            \"google-analytics\": \"Google Analytics\",\n            \"gtag\": \"Google Tag Manager\",\n            \"google-tag\": \"Google Tag Manager\",\n            \"doubleclick\": \"DoubleClick (Google广告)\",\n            \"tiktok\": \"TikTok Pixel\",\n            \"twitter\": \"Twitter Pixel\",\n            \"amplitude\": \"Amplitude Analytics\",\n            \"hotjar\": \"Hotjar\",\n            \"segment\": \"Segment\",\n            \"mixpanel\": \"Mixpanel\"\n        };\n        thirdPartyScripts.forEach((scriptUrl)=>{\n            for (const [key, name] of Object.entries(knownTrackers)){\n                if (scriptUrl.includes(key)) {\n                    chain.addNode(new ThoughtNode(\"script\", `页面加载了 ${name}`, {\n                        url: scriptUrl\n                    }));\n                    break;\n                }\n            }\n        });\n        // Check for fingerprinting techniques\n        const fingerprintingMethods = await page.evaluate(()=>{\n            const methods = [];\n            // Check canvas fingerprinting\n            if (document.createElement(\"canvas\").getContext) {\n                methods.push(\"canvas\");\n            }\n            // Check WebRTC\n            if (window.RTCPeerConnection) {\n                methods.push(\"webrtc\");\n            }\n            // Check device enumeration\n            if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {\n                methods.push(\"mediaDevices\");\n            }\n            return methods;\n        });\n        if (fingerprintingMethods.includes(\"canvas\")) {\n            chain.addNode(new ThoughtNode(\"fingerprinting\", \"网站使用 Canvas API 可能进行指纹识别\", {\n                method: \"canvas\"\n            }));\n        }\n        if (fingerprintingMethods.includes(\"webrtc\")) {\n            chain.addNode(new ThoughtNode(\"fingerprinting\", \"网站使用 WebRTC API 可能获取本地IP地址\", {\n                method: \"webrtc\"\n            }));\n        }\n        return chain;\n    } catch (error) {\n        console.error(`跟踪网站时出错: ${error.message}`);\n        // 即使出错，也返回一个带有错误信息的链\n        chain.addNode(new ThoughtNode(\"error\", `跟踪过程出错: ${error.message}`, {\n            error: true\n        }));\n        // 在出错时使用简化版跟踪来提供一些基本数据\n        if (chain.nodes.length < 2) {\n            console.log(\"使用简化版跟踪作为备用\");\n            return simplifiedTrack(url);\n        }\n        return chain;\n    } finally{\n        if (browser) {\n            await browser.close().catch((err)=>console.warn(\"关闭浏览器时出错:\", err.message));\n        }\n    }\n}\nmodule.exports = {\n    trackWebsite\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90cmFja2VyLmpzIiwibWFwcGluZ3MiOiJBQUFBOzs7Q0FHQztBQUVELElBQUlBO0FBQ0osSUFBSTtJQUNGQSxZQUFZQyxtQkFBT0EsQ0FBQztBQUN0QixFQUFFLE9BQU9DLEtBQUs7SUFDWkMsUUFBUUMsS0FBSyxDQUFDLG1CQUFtQkYsSUFBSUcsT0FBTztBQUM5QztBQUVBLE1BQU0sRUFBRUMsV0FBVyxFQUFFQyxZQUFZLEVBQUUsR0FBR04sbUJBQU9BLENBQUM7QUFFOUM7O0NBRUMsR0FDRCxlQUFlTyxnQkFBZ0JDLEdBQUc7SUFDaENOLFFBQVFPLEdBQUcsQ0FBQztJQUNaLE1BQU1DLFFBQVEsSUFBSUosYUFBYUU7SUFFL0IsWUFBWTtJQUNaRSxNQUFNQyxPQUFPLENBQUMsSUFBSU4sWUFBWSxjQUFjLENBQUMsS0FBSyxFQUFFRyxJQUFJLENBQUMsRUFBRTtRQUFFQTtJQUFJO0lBQ2pFRSxNQUFNQyxPQUFPLENBQUMsSUFBSU4sWUFBWSxXQUFXLENBQUMsY0FBYyxDQUFDLEVBQUU7UUFBRUcsS0FBS0EsTUFBTTtJQUFZO0lBQ3BGRSxNQUFNQyxPQUFPLENBQUMsSUFBSU4sWUFBWSxVQUFVLCtCQUErQjtRQUFFTyxRQUFRO0lBQU87SUFFeEYsa0JBQWtCO0lBQ2xCLElBQUlKLElBQUlLLFFBQVEsQ0FBQyxXQUFXO1FBQzFCSCxNQUFNQyxPQUFPLENBQUMsSUFBSU4sWUFBWSxVQUFVLDhCQUE4QjtZQUFFRyxLQUFLO1FBQWdEO0lBQy9ILE9BQU8sSUFBSUEsSUFBSUssUUFBUSxDQUFDLGFBQWE7UUFDbkNILE1BQU1DLE9BQU8sQ0FBQyxJQUFJTixZQUFZLFVBQVUsa0NBQWtDO1lBQUVHLEtBQUs7UUFBK0M7SUFDbEksT0FBTyxJQUFJQSxJQUFJSyxRQUFRLENBQUMsV0FBV0wsSUFBSUssUUFBUSxDQUFDLFNBQVM7UUFDdkRILE1BQU1DLE9BQU8sQ0FBQyxJQUFJTixZQUFZLFVBQVUsa0JBQWtCO1lBQUVHLEtBQUs7UUFBMkI7SUFDOUY7SUFFQUUsTUFBTUMsT0FBTyxDQUFDLElBQUlOLFlBQVksV0FBVyxnQ0FBZ0M7UUFBRVMsTUFBTTtRQUFnQkMsV0FBVztJQUFFO0lBRTlHLE9BQU9MO0FBQ1Q7QUFFQTs7OztDQUlDLEdBQ0QsZUFBZU0sYUFBYVIsR0FBRztJQUM3QiwyQkFBMkI7SUFDM0IsSUFBSSxDQUFDVCxXQUFXO1FBQ2RHLFFBQVFlLElBQUksQ0FBQztRQUNiLE9BQU9WLGdCQUFnQkM7SUFDekI7SUFFQU4sUUFBUU8sR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFRCxJQUFJLENBQUM7SUFDNUIsTUFBTUUsUUFBUSxJQUFJSixhQUFhRTtJQUUvQixJQUFJVTtJQUNKLElBQUk7UUFDRkEsVUFBVSxNQUFNbkIsVUFBVW9CLE1BQU0sQ0FBQztZQUMvQkMsVUFBVTtZQUNWQyxNQUFNO2dCQUNKO2dCQUNBO2dCQUNBO2dCQUNBO2dCQUNBO2FBQ0Q7UUFDSDtRQUVBLE1BQU1DLE9BQU8sTUFBTUosUUFBUUssT0FBTztRQUVsQyx5QkFBeUI7UUFDekJELEtBQUtFLEVBQUUsQ0FBQyxXQUFXQyxDQUFBQTtZQUNqQixNQUFNakIsTUFBTWlCLFFBQVFqQixHQUFHO1lBQ3ZCLDZDQUE2QztZQUM3QyxNQUFNa0Isa0JBQWtCO2dCQUN0QjtnQkFBcUI7Z0JBQWE7Z0JBQVk7Z0JBQWdCO2dCQUM5RDtnQkFBYztnQkFBVTtnQkFBWTtnQkFBVztnQkFBWTthQUM1RDtZQUVELElBQUlBLGdCQUFnQkMsSUFBSSxDQUFDQyxDQUFBQSxVQUFXQSxRQUFRQyxJQUFJLENBQUNyQixPQUFPO2dCQUN0REUsTUFBTUMsT0FBTyxDQUFDLElBQUlOLFlBQVksV0FBVyxDQUFDLFNBQVMsRUFBRUcsSUFBSSxDQUFDLEVBQUU7b0JBQUVBO2dCQUFJO1lBQ3BFO1FBQ0Y7UUFFQSxnQkFBZ0I7UUFDaEIsTUFBTXNCLDhCQUE4QixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7SUFlckMsQ0FBQztRQUVELE1BQU1SLEtBQUtTLHFCQUFxQixDQUFDRDtRQUVqQyxzQkFBc0I7UUFDdEJwQixNQUFNQyxPQUFPLENBQUMsSUFBSU4sWUFBWSxjQUFjLENBQUMsS0FBSyxFQUFFRyxJQUFJLENBQUMsRUFBRTtZQUFFQTtRQUFJO1FBQ2pFTixRQUFRTyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUVELElBQUksR0FBRyxDQUFDO1FBRTVCLElBQUk7WUFDRixNQUFNYyxLQUFLVSxJQUFJLENBQUN4QixLQUFLO2dCQUNuQnlCLFdBQVc7Z0JBQ1hDLFNBQVM7WUFDWDtRQUNGLEVBQUUsT0FBT0MsVUFBVTtZQUNqQmpDLFFBQVFlLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRVQsSUFBSSxTQUFTLEVBQUUyQixTQUFTL0IsT0FBTyxDQUFDLENBQUM7WUFDckQsY0FBYztZQUNkTSxNQUFNQyxPQUFPLENBQUMsSUFBSU4sWUFBWSxTQUFTLENBQUMsU0FBUyxFQUFFOEIsU0FBUy9CLE9BQU8sQ0FBQyxDQUFDLEVBQUU7Z0JBQUVELE9BQU87WUFBSztRQUN2RjtRQUVBLDJDQUEyQztRQUMzQyxNQUFNLElBQUlpQyxRQUFRQyxDQUFBQSxVQUFXQyxXQUFXRCxTQUFTO1FBRWpELDBCQUEwQjtRQUMxQixNQUFNRSxpQkFBaUIsTUFBTWpCLEtBQUtrQixRQUFRLENBQUM7WUFDekMsT0FBTztnQkFDTEMsWUFBWUMsT0FBT0QsVUFBVSxJQUFJO2dCQUNqQ0UsZUFBZUQsT0FBT0MsYUFBYSxJQUFJO1lBQ3pDO1FBQ0Y7UUFFQSxJQUFJSixlQUFlRSxVQUFVLEVBQUU7WUFDN0IvQixNQUFNQyxPQUFPLENBQUMsSUFBSU4sWUFBWSxVQUFVLHlCQUF5QjtnQkFBRU8sUUFBUTtZQUFPO1FBQ3BGO1FBRUEsSUFBSTJCLGVBQWVJLGFBQWEsRUFBRTtZQUNoQ2pDLE1BQU1DLE9BQU8sQ0FBQyxJQUFJTixZQUFZLFVBQVUseUJBQXlCO2dCQUFFTyxRQUFRO1lBQVE7UUFDckY7UUFFQSxtREFBbUQ7UUFDbkQsTUFBTWdDLGtCQUFrQixNQUFNdEIsS0FBS2tCLFFBQVEsQ0FBQztZQUMxQyxxREFBcUQ7WUFDckQsSUFBSUssdUJBQXVCO1lBQzNCLElBQUlDLHlCQUF5QjtZQUU3Qiw0QkFBNEI7WUFDNUIsTUFBTUMsb0JBQW9CQyxPQUFPQyxJQUFJLENBQUNDLGNBQWNDLE1BQU07WUFDMUQsTUFBTUMsc0JBQXNCSixPQUFPQyxJQUFJLENBQUNJLGdCQUFnQkYsTUFBTTtZQUU5RCxPQUFPO2dCQUNMSjtnQkFDQUs7WUFDRjtRQUNGO1FBRUEsSUFBSVIsZ0JBQWdCRyxpQkFBaUIsR0FBRyxHQUFHO1lBQ3pDckMsTUFBTUMsT0FBTyxDQUFDLElBQUlOLFlBQVksV0FBVyxDQUFDLHNCQUFzQixFQUFFdUMsZ0JBQWdCRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDekdqQyxNQUFNO2dCQUNOQyxXQUFXNkIsZ0JBQWdCRyxpQkFBaUI7WUFDOUM7UUFDRjtRQUVBLElBQUlILGdCQUFnQlEsbUJBQW1CLEdBQUcsR0FBRztZQUMzQzFDLE1BQU1DLE9BQU8sQ0FBQyxJQUFJTixZQUFZLFdBQVcsQ0FBQyx3QkFBd0IsRUFBRXVDLGdCQUFnQlEsbUJBQW1CLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQzdHdEMsTUFBTTtnQkFDTkMsV0FBVzZCLGdCQUFnQlEsbUJBQW1CO1lBQ2hEO1FBQ0Y7UUFFQSw2QkFBNkI7UUFDN0IsTUFBTUUsb0JBQW9CLE1BQU1oQyxLQUFLa0IsUUFBUSxDQUFDO1lBQzVDLE9BQU9lLE1BQU1DLElBQUksQ0FBQ0MsU0FBU0Msb0JBQW9CLENBQUMsV0FDN0NDLE1BQU0sQ0FBQ0MsQ0FBQUEsU0FBVUEsT0FBT0MsR0FBRyxFQUMzQkMsR0FBRyxDQUFDRixDQUFBQSxTQUFVQSxPQUFPQyxHQUFHO1FBQzdCO1FBRUEsTUFBTUUsZ0JBQWdCO1lBQ3BCLFlBQVk7WUFDWixvQkFBb0I7WUFDcEIsUUFBUTtZQUNSLGNBQWM7WUFDZCxlQUFlO1lBQ2YsVUFBVTtZQUNWLFdBQVc7WUFDWCxhQUFhO1lBQ2IsVUFBVTtZQUNWLFdBQVc7WUFDWCxZQUFZO1FBQ2Q7UUFFQVQsa0JBQWtCVSxPQUFPLENBQUNDLENBQUFBO1lBQ3hCLEtBQUssTUFBTSxDQUFDQyxLQUFLQyxLQUFLLElBQUluQixPQUFPb0IsT0FBTyxDQUFDTCxlQUFnQjtnQkFDdkQsSUFBSUUsVUFBVXBELFFBQVEsQ0FBQ3FELE1BQU07b0JBQzNCeEQsTUFBTUMsT0FBTyxDQUFDLElBQUlOLFlBQVksVUFBVSxDQUFDLE1BQU0sRUFBRThELEtBQUssQ0FBQyxFQUFFO3dCQUFFM0QsS0FBS3lEO29CQUFVO29CQUMxRTtnQkFDRjtZQUNGO1FBQ0Y7UUFFQSxzQ0FBc0M7UUFDdEMsTUFBTUksd0JBQXdCLE1BQU0vQyxLQUFLa0IsUUFBUSxDQUFDO1lBQ2hELE1BQU04QixVQUFVLEVBQUU7WUFFbEIsOEJBQThCO1lBQzlCLElBQUliLFNBQVNjLGFBQWEsQ0FBQyxVQUFVQyxVQUFVLEVBQUU7Z0JBQy9DRixRQUFRRyxJQUFJLENBQUM7WUFDZjtZQUVBLGVBQWU7WUFDZixJQUFJL0IsT0FBT2dDLGlCQUFpQixFQUFFO2dCQUM1QkosUUFBUUcsSUFBSSxDQUFDO1lBQ2Y7WUFFQSwyQkFBMkI7WUFDM0IsSUFBSUUsVUFBVUMsWUFBWSxJQUFJRCxVQUFVQyxZQUFZLENBQUNDLGdCQUFnQixFQUFFO2dCQUNyRVAsUUFBUUcsSUFBSSxDQUFDO1lBQ2Y7WUFFQSxPQUFPSDtRQUNUO1FBRUEsSUFBSUQsc0JBQXNCeEQsUUFBUSxDQUFDLFdBQVc7WUFDNUNILE1BQU1DLE9BQU8sQ0FBQyxJQUFJTixZQUFZLGtCQUFrQiw0QkFBNEI7Z0JBQUV5RSxRQUFRO1lBQVM7UUFDakc7UUFFQSxJQUFJVCxzQkFBc0J4RCxRQUFRLENBQUMsV0FBVztZQUM1Q0gsTUFBTUMsT0FBTyxDQUFDLElBQUlOLFlBQVksa0JBQWtCLDhCQUE4QjtnQkFBRXlFLFFBQVE7WUFBUztRQUNuRztRQUVBLE9BQU9wRTtJQUNULEVBQUUsT0FBT1AsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsQ0FBQyxTQUFTLEVBQUVBLE1BQU1DLE9BQU8sQ0FBQyxDQUFDO1FBQ3pDLHFCQUFxQjtRQUNyQk0sTUFBTUMsT0FBTyxDQUFDLElBQUlOLFlBQVksU0FBUyxDQUFDLFFBQVEsRUFBRUYsTUFBTUMsT0FBTyxDQUFDLENBQUMsRUFBRTtZQUFFRCxPQUFPO1FBQUs7UUFFakYsdUJBQXVCO1FBQ3ZCLElBQUlPLE1BQU1xRSxLQUFLLENBQUM1QixNQUFNLEdBQUcsR0FBRztZQUMxQmpELFFBQVFPLEdBQUcsQ0FBQztZQUNaLE9BQU9GLGdCQUFnQkM7UUFDekI7UUFFQSxPQUFPRTtJQUNULFNBQVU7UUFDUixJQUFJUSxTQUFTO1lBQ1gsTUFBTUEsUUFBUThELEtBQUssR0FBR0MsS0FBSyxDQUFDaEYsQ0FBQUEsTUFBT0MsUUFBUWUsSUFBSSxDQUFDLGFBQWFoQixJQUFJRyxPQUFPO1FBQzFFO0lBQ0Y7QUFDRjtBQUVBOEUsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZuRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJpdmFjeS10cmFja2VyLy4vdHJhY2tlci5qcz9jODJlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBXZWJzaXRlIFRyYWNrZXIgTW9kdWxlXHJcbiAqIFVzZXMgUHVwcGV0ZWVyIHRvIHRyYWNrIHdlYnNpdGUgYmVoYXZpb3JzIHJlbGF0ZWQgdG8gcHJpdmFjeVxyXG4gKi9cclxuXHJcbmxldCBwdXBwZXRlZXI7XHJcbnRyeSB7XHJcbiAgcHVwcGV0ZWVyID0gcmVxdWlyZSgncHVwcGV0ZWVyJyk7XHJcbn0gY2F0Y2ggKGVycikge1xyXG4gIGNvbnNvbGUuZXJyb3IoJ1B1cHBldGVlciDliqDovb3lpLHotKU6JywgZXJyLm1lc3NhZ2UpO1xyXG59XHJcblxyXG5jb25zdCB7IFRob3VnaHROb2RlLCBUaG91Z2h0Q2hhaW4gfSA9IHJlcXVpcmUoJy4vbm90Jyk7XHJcblxyXG4vKipcclxuICog566A5YyW54mI55qE572R56uZ6Lef6Liq77yM5b2TIFB1cHBldGVlciDml6Dms5XmraPluLjlt6XkvZzml7bkvb/nlKhcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpbXBsaWZpZWRUcmFjayh1cmwpIHtcclxuICBjb25zb2xlLmxvZygn5L2/55So566A5YyW54mI6Lef6Liq5Yqf6IO9IChQdXBwZXRlZXLlj6/og73kuI3lj6/nlKgpJyk7XHJcbiAgY29uc3QgY2hhaW4gPSBuZXcgVGhvdWdodENoYWluKHVybCk7XHJcbiAgXHJcbiAgLy8g5re75Yqg5qih5ouf55qE6KGM5Li66IqC54K5XHJcbiAgY2hhaW4uYWRkTm9kZShuZXcgVGhvdWdodE5vZGUoJ25hdmlnYXRpb24nLCBg6K6/6Zeu572R56uZICR7dXJsfWAsIHsgdXJsIH0pKTtcclxuICBjaGFpbi5hZGROb2RlKG5ldyBUaG91Z2h0Tm9kZSgncmVxdWVzdCcsIGDmqKHmi586IOmhtemdouWPr+iDveivt+axguS6hui3n+i4quWZqGAsIHsgdXJsOiB1cmwgKyAnL3RyYWNraW5nJyB9KSk7XHJcbiAgY2hhaW4uYWRkTm9kZShuZXcgVGhvdWdodE5vZGUoJ2Nvb2tpZScsICfmqKHmi586IOiEmuacrOWPr+iDveivu+WPluS6hiBkb2N1bWVudC5jb29raWUnLCB7IGFjdGlvbjogJ3JlYWQnIH0pKTtcclxuICBcclxuICAvLyDmoLnmja7nvZHnq5nln5/lkI3mt7vliqDkuIDkupvnibnlrprnmoTooYzkuLpcclxuICBpZiAodXJsLmluY2x1ZGVzKCdnb29nbGUnKSkge1xyXG4gICAgY2hhaW4uYWRkTm9kZShuZXcgVGhvdWdodE5vZGUoJ3NjcmlwdCcsICfmqKHmi586IOmhtemdouWKoOi9veS6hiBHb29nbGUgQW5hbHl0aWNzJywgeyB1cmw6ICdodHRwczovL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9hbmFseXRpY3MuanMnIH0pKTtcclxuICB9IGVsc2UgaWYgKHVybC5pbmNsdWRlcygnZmFjZWJvb2snKSkge1xyXG4gICAgY2hhaW4uYWRkTm9kZShuZXcgVGhvdWdodE5vZGUoJ3NjcmlwdCcsICfmqKHmi586IOmhtemdouWKoOi9veS6hiBGYWNlYm9vayBQaXhlbCDmiJYgU0RLJywgeyB1cmw6ICdodHRwczovL2Nvbm5lY3QuZmFjZWJvb2submV0L3NpZ25hbHMvY29uZmlnLycgfSkpO1xyXG4gIH0gZWxzZSBpZiAodXJsLmluY2x1ZGVzKCduZXdzJykgfHwgdXJsLmluY2x1ZGVzKCdibG9nJykpIHtcclxuICAgIGNoYWluLmFkZE5vZGUobmV3IFRob3VnaHROb2RlKCdzY3JpcHQnLCAn5qih5oufOiDpobXpnaLliqDovb3kuoblub/lkYrot5/ouKrlmagnLCB7IHVybDogJ2h0dHBzOi8vYWRzLXRyYWNraW5nLmNvbScgfSkpO1xyXG4gIH1cclxuICBcclxuICBjaGFpbi5hZGROb2RlKG5ldyBUaG91Z2h0Tm9kZSgnc3RvcmFnZScsICfmqKHmi586IOe9keermeWPr+iDveS9v+eUqCBsb2NhbFN0b3JhZ2Ug5a2Y5YKo5pWw5o2uJywgeyB0eXBlOiAnbG9jYWxTdG9yYWdlJywgaXRlbUNvdW50OiA1IH0pKTtcclxuICBcclxuICByZXR1cm4gY2hhaW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUcmFjayBhIHNpbmdsZSB3ZWJzaXRlIGFuZCBjb2xsZWN0IHByaXZhY3ktcmVsYXRlZCBiZWhhdmlvcnNcclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFVSTCBvZiB0aGUgd2Vic2l0ZSB0byB0cmFja1xyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxUaG91Z2h0Q2hhaW4+fSAtIENoYWluIG9mIG9ic2VydmVkIGJlaGF2aW9yc1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdHJhY2tXZWJzaXRlKHVybCkge1xyXG4gIC8vIOWmguaenCBQdXBwZXRlZXIg5LiN5Y+v55So77yM5L2/55So566A5YyW54mI6Lef6LiqXHJcbiAgaWYgKCFwdXBwZXRlZXIpIHtcclxuICAgIGNvbnNvbGUud2FybignUHVwcGV0ZWVyIOS4jeWPr+eUqO+8jOS9v+eUqOeugOWMlueJiOi3n+i4quWKn+iDvScpO1xyXG4gICAgcmV0dXJuIHNpbXBsaWZpZWRUcmFjayh1cmwpO1xyXG4gIH1cclxuICBcclxuICBjb25zb2xlLmxvZyhg5byA5aeL6Lef6Liq572R56uZOiAke3VybH1gKTtcclxuICBjb25zdCBjaGFpbiA9IG5ldyBUaG91Z2h0Q2hhaW4odXJsKTtcclxuICBcclxuICBsZXQgYnJvd3NlcjtcclxuICB0cnkge1xyXG4gICAgYnJvd3NlciA9IGF3YWl0IHB1cHBldGVlci5sYXVuY2goe1xyXG4gICAgICBoZWFkbGVzczogdHJ1ZSxcclxuICAgICAgYXJnczogW1xyXG4gICAgICAgICctLW5vLXNhbmRib3gnLFxyXG4gICAgICAgICctLWRpc2FibGUtc2V0dWlkLXNhbmRib3gnLFxyXG4gICAgICAgICctLWRpc2FibGUtZGV2LXNobS11c2FnZScsXHJcbiAgICAgICAgJy0tZGlzYWJsZS1hY2NlbGVyYXRlZC0yZC1jYW52YXMnLFxyXG4gICAgICAgICctLWRpc2FibGUtZ3B1J1xyXG4gICAgICBdXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XHJcbiAgICBcclxuICAgIC8vIFRyYWNrIG5ldHdvcmsgcmVxdWVzdHNcclxuICAgIHBhZ2Uub24oJ3JlcXVlc3QnLCByZXF1ZXN0ID0+IHtcclxuICAgICAgY29uc3QgdXJsID0gcmVxdWVzdC51cmwoKTtcclxuICAgICAgLy8gRmlsdGVyIGZvciB0cmFja2luZyBhbmQgYW5hbHl0aWNzIHJlcXVlc3RzXHJcbiAgICAgIGNvbnN0IHRyYWNrZXJQYXR0ZXJucyA9IFtcclxuICAgICAgICAvZ29vZ2xlLWFuYWx5dGljcy9pLCAvZmFjZWJvb2svaSwgL2ZiXFwuY29tL2ksIC9kb3VibGVjbGljay9pLCAvdHJhY2tpbmcvaSwgXHJcbiAgICAgICAgL2FuYWx5dGljcy9pLCAvcGl4ZWwvaSwgL3RyYWNrZXIvaSwgL2JlYWNvbi9pLCAvY29sbGVjdC9pLCAvdGVsZW1ldHJ5L2lcclxuICAgICAgXTtcclxuICAgICAgXHJcbiAgICAgIGlmICh0cmFja2VyUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdCh1cmwpKSkge1xyXG4gICAgICAgIGNoYWluLmFkZE5vZGUobmV3IFRob3VnaHROb2RlKCdyZXF1ZXN0JywgYOmhtemdouivt+axguS6hui3n+i4quWZqCAke3VybH1gLCB7IHVybCB9KSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBUcmFjayBjb29raWVzXHJcbiAgICBjb25zdCBjb29raWVBY2Nlc3NEZXRlY3Rpb25TY3JpcHQgPSBgXHJcbiAgICAgIChmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbERvY3VtZW50Q29va2llID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihEb2N1bWVudC5wcm90b3R5cGUsICdjb29raWUnKTtcclxuICAgICAgICBcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsICdjb29raWUnLCB7XHJcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY29va2llUmVhZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbERvY3VtZW50Q29va2llLmdldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jb29raWVXcml0dGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRG9jdW1lbnRDb29raWUuc2V0LmNhbGwodGhpcywgdmFsKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSkoKTtcclxuICAgIGA7XHJcbiAgICBcclxuICAgIGF3YWl0IHBhZ2UuZXZhbHVhdGVPbk5ld0RvY3VtZW50KGNvb2tpZUFjY2Vzc0RldGVjdGlvblNjcmlwdCk7XHJcbiAgICBcclxuICAgIC8vIE5hdmlnYXRlIHRvIHRoZSBVUkxcclxuICAgIGNoYWluLmFkZE5vZGUobmV3IFRob3VnaHROb2RlKCduYXZpZ2F0aW9uJywgYOiuv+mXrue9keermSAke3VybH1gLCB7IHVybCB9KSk7XHJcbiAgICBjb25zb2xlLmxvZyhg5q2j5Zyo6K6/6ZeuICR7dXJsfS4uLmApO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBwYWdlLmdvdG8odXJsLCB7IFxyXG4gICAgICAgIHdhaXRVbnRpbDogJ25ldHdvcmtpZGxlMicsXHJcbiAgICAgICAgdGltZW91dDogMzAwMDBcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChuYXZFcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oYOWvvOiIquWIsCAke3VybH0g5pe26LaF5pe25oiW6ZSZ6K+vOiAke25hdkVycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgIC8vIOWNs+S9v+WvvOiIquWksei0peS5n+e7p+e7reajgOa1i1xyXG4gICAgICBjaGFpbi5hZGROb2RlKG5ldyBUaG91Z2h0Tm9kZSgnZXJyb3InLCBg5a+86Iiq5Yiw572R56uZ5aSx6LSlOiAke25hdkVycm9yLm1lc3NhZ2V9YCwgeyBlcnJvcjogdHJ1ZSB9KSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFdhaXQgYSBiaXQgbW9yZSBmb3IgYW55IGRlZmVycmVkIHNjcmlwdHNcclxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDAwKSk7XHJcbiAgICBcclxuICAgIC8vIENoZWNrIGZvciBjb29raWUgYWNjZXNzXHJcbiAgICBjb25zdCBjb29raWVBY3Rpdml0eSA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGNvb2tpZVJlYWQ6IHdpbmRvdy5jb29raWVSZWFkIHx8IGZhbHNlLFxyXG4gICAgICAgIGNvb2tpZVdyaXR0ZW46IHdpbmRvdy5jb29raWVXcml0dGVuIHx8IGZhbHNlXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgaWYgKGNvb2tpZUFjdGl2aXR5LmNvb2tpZVJlYWQpIHtcclxuICAgICAgY2hhaW4uYWRkTm9kZShuZXcgVGhvdWdodE5vZGUoJ2Nvb2tpZScsICfohJrmnKzor7vlj5bkuoYgZG9jdW1lbnQuY29va2llJywgeyBhY3Rpb246ICdyZWFkJyB9KSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChjb29raWVBY3Rpdml0eS5jb29raWVXcml0dGVuKSB7XHJcbiAgICAgIGNoYWluLmFkZE5vZGUobmV3IFRob3VnaHROb2RlKCdjb29raWUnLCAn6ISa5pys5YaZ5YWl5LqGIGRvY3VtZW50LmNvb2tpZScsIHsgYWN0aW9uOiAnd3JpdGUnIH0pKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgZm9yIGxvY2FsU3RvcmFnZSBhbmQgc2Vzc2lvblN0b3JhZ2UgYWNjZXNzXHJcbiAgICBjb25zdCBzdG9yYWdlQWN0aXZpdHkgPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IHtcclxuICAgICAgLy8gT3ZlcnJpZGUgU3RvcmFnZSBwcm90b3R5cGUgbWV0aG9kcyB0byBkZXRlY3QgdXNhZ2VcclxuICAgICAgbGV0IGxvY2FsU3RvcmFnZUFjY2Vzc2VkID0gZmFsc2U7XHJcbiAgICAgIGxldCBzZXNzaW9uU3RvcmFnZUFjY2Vzc2VkID0gZmFsc2U7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgdmFsdWVzXHJcbiAgICAgIGNvbnN0IGxvY2FsU3RvcmFnZUl0ZW1zID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5sZW5ndGg7XHJcbiAgICAgIGNvbnN0IHNlc3Npb25TdG9yYWdlSXRlbXMgPSBPYmplY3Qua2V5cyhzZXNzaW9uU3RvcmFnZSkubGVuZ3RoO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2VJdGVtcyxcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZUl0ZW1zXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgaWYgKHN0b3JhZ2VBY3Rpdml0eS5sb2NhbFN0b3JhZ2VJdGVtcyA+IDApIHtcclxuICAgICAgY2hhaW4uYWRkTm9kZShuZXcgVGhvdWdodE5vZGUoJ3N0b3JhZ2UnLCBg572R56uZ5L2/55SoIGxvY2FsU3RvcmFnZSDlrZjlgqjkuoYgJHtzdG9yYWdlQWN0aXZpdHkubG9jYWxTdG9yYWdlSXRlbXN9IOmhueaVsOaNrmAsIHsgXHJcbiAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScsIFxyXG4gICAgICAgIGl0ZW1Db3VudDogc3RvcmFnZUFjdGl2aXR5LmxvY2FsU3RvcmFnZUl0ZW1zIFxyXG4gICAgICB9KSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChzdG9yYWdlQWN0aXZpdHkuc2Vzc2lvblN0b3JhZ2VJdGVtcyA+IDApIHtcclxuICAgICAgY2hhaW4uYWRkTm9kZShuZXcgVGhvdWdodE5vZGUoJ3N0b3JhZ2UnLCBg572R56uZ5L2/55SoIHNlc3Npb25TdG9yYWdlIOWtmOWCqOS6hiAke3N0b3JhZ2VBY3Rpdml0eS5zZXNzaW9uU3RvcmFnZUl0ZW1zfSDpobnmlbDmja5gLCB7IFxyXG4gICAgICAgIHR5cGU6ICdzZXNzaW9uU3RvcmFnZScsIFxyXG4gICAgICAgIGl0ZW1Db3VudDogc3RvcmFnZUFjdGl2aXR5LnNlc3Npb25TdG9yYWdlSXRlbXMgXHJcbiAgICAgIH0pKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRGV0ZWN0IHRoaXJkLXBhcnR5IHNjcmlwdHNcclxuICAgIGNvbnN0IHRoaXJkUGFydHlTY3JpcHRzID0gYXdhaXQgcGFnZS5ldmFsdWF0ZSgoKSA9PiB7XHJcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKSlcclxuICAgICAgICAuZmlsdGVyKHNjcmlwdCA9PiBzY3JpcHQuc3JjKVxyXG4gICAgICAgIC5tYXAoc2NyaXB0ID0+IHNjcmlwdC5zcmMpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGNvbnN0IGtub3duVHJhY2tlcnMgPSB7XHJcbiAgICAgICdmYWNlYm9vayc6ICdGYWNlYm9vayBQaXhlbCDmiJYgU0RLJyxcclxuICAgICAgJ2dvb2dsZS1hbmFseXRpY3MnOiAnR29vZ2xlIEFuYWx5dGljcycsXHJcbiAgICAgICdndGFnJzogJ0dvb2dsZSBUYWcgTWFuYWdlcicsXHJcbiAgICAgICdnb29nbGUtdGFnJzogJ0dvb2dsZSBUYWcgTWFuYWdlcicsXHJcbiAgICAgICdkb3VibGVjbGljayc6ICdEb3VibGVDbGljayAoR29vZ2xl5bm/5ZGKKScsXHJcbiAgICAgICd0aWt0b2snOiAnVGlrVG9rIFBpeGVsJyxcclxuICAgICAgJ3R3aXR0ZXInOiAnVHdpdHRlciBQaXhlbCcsXHJcbiAgICAgICdhbXBsaXR1ZGUnOiAnQW1wbGl0dWRlIEFuYWx5dGljcycsXHJcbiAgICAgICdob3RqYXInOiAnSG90amFyJyxcclxuICAgICAgJ3NlZ21lbnQnOiAnU2VnbWVudCcsXHJcbiAgICAgICdtaXhwYW5lbCc6ICdNaXhwYW5lbCdcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXJkUGFydHlTY3JpcHRzLmZvckVhY2goc2NyaXB0VXJsID0+IHtcclxuICAgICAgZm9yIChjb25zdCBba2V5LCBuYW1lXSBvZiBPYmplY3QuZW50cmllcyhrbm93blRyYWNrZXJzKSkge1xyXG4gICAgICAgIGlmIChzY3JpcHRVcmwuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgY2hhaW4uYWRkTm9kZShuZXcgVGhvdWdodE5vZGUoJ3NjcmlwdCcsIGDpobXpnaLliqDovb3kuoYgJHtuYW1lfWAsIHsgdXJsOiBzY3JpcHRVcmwgfSkpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgZm9yIGZpbmdlcnByaW50aW5nIHRlY2huaXF1ZXNcclxuICAgIGNvbnN0IGZpbmdlcnByaW50aW5nTWV0aG9kcyA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xyXG4gICAgICBjb25zdCBtZXRob2RzID0gW107XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBjYW52YXMgZmluZ2VycHJpbnRpbmdcclxuICAgICAgaWYgKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLmdldENvbnRleHQpIHtcclxuICAgICAgICBtZXRob2RzLnB1c2goJ2NhbnZhcycpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBXZWJSVENcclxuICAgICAgaWYgKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xyXG4gICAgICAgIG1ldGhvZHMucHVzaCgnd2VicnRjJyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIENoZWNrIGRldmljZSBlbnVtZXJhdGlvblxyXG4gICAgICBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMpIHtcclxuICAgICAgICBtZXRob2RzLnB1c2goJ21lZGlhRGV2aWNlcycpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gbWV0aG9kcztcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBpZiAoZmluZ2VycHJpbnRpbmdNZXRob2RzLmluY2x1ZGVzKCdjYW52YXMnKSkge1xyXG4gICAgICBjaGFpbi5hZGROb2RlKG5ldyBUaG91Z2h0Tm9kZSgnZmluZ2VycHJpbnRpbmcnLCAn572R56uZ5L2/55SoIENhbnZhcyBBUEkg5Y+v6IO96L+b6KGM5oyH57q56K+G5YirJywgeyBtZXRob2Q6ICdjYW52YXMnIH0pKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKGZpbmdlcnByaW50aW5nTWV0aG9kcy5pbmNsdWRlcygnd2VicnRjJykpIHtcclxuICAgICAgY2hhaW4uYWRkTm9kZShuZXcgVGhvdWdodE5vZGUoJ2ZpbmdlcnByaW50aW5nJywgJ+e9keermeS9v+eUqCBXZWJSVEMgQVBJIOWPr+iDveiOt+WPluacrOWcsElQ5Zyw5Z2AJywgeyBtZXRob2Q6ICd3ZWJydGMnIH0pKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGNoYWluO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGDot5/ouKrnvZHnq5nml7blh7rplJk6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIC8vIOWNs+S9v+WHuumUme+8jOS5n+i/lOWbnuS4gOS4quW4puaciemUmeivr+S/oeaBr+eahOmTvlxyXG4gICAgY2hhaW4uYWRkTm9kZShuZXcgVGhvdWdodE5vZGUoJ2Vycm9yJywgYOi3n+i4qui/h+eoi+WHuumUmTogJHtlcnJvci5tZXNzYWdlfWAsIHsgZXJyb3I6IHRydWUgfSkpO1xyXG4gICAgXHJcbiAgICAvLyDlnKjlh7rplJnml7bkvb/nlKjnroDljJbniYjot5/ouKrmnaXmj5DkvpvkuIDkupvln7rmnKzmlbDmja5cclxuICAgIGlmIChjaGFpbi5ub2Rlcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfkvb/nlKjnroDljJbniYjot5/ouKrkvZzkuLrlpIfnlKgnKTtcclxuICAgICAgcmV0dXJuIHNpbXBsaWZpZWRUcmFjayh1cmwpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gY2hhaW47XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGlmIChicm93c2VyKSB7XHJcbiAgICAgIGF3YWl0IGJyb3dzZXIuY2xvc2UoKS5jYXRjaChlcnIgPT4gY29uc29sZS53YXJuKCflhbPpl63mtY/op4jlmajml7blh7rplJk6JywgZXJyLm1lc3NhZ2UpKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIHRyYWNrV2Vic2l0ZVxyXG59OyAiXSwibmFtZXMiOlsicHVwcGV0ZWVyIiwicmVxdWlyZSIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsIm1lc3NhZ2UiLCJUaG91Z2h0Tm9kZSIsIlRob3VnaHRDaGFpbiIsInNpbXBsaWZpZWRUcmFjayIsInVybCIsImxvZyIsImNoYWluIiwiYWRkTm9kZSIsImFjdGlvbiIsImluY2x1ZGVzIiwidHlwZSIsIml0ZW1Db3VudCIsInRyYWNrV2Vic2l0ZSIsIndhcm4iLCJicm93c2VyIiwibGF1bmNoIiwiaGVhZGxlc3MiLCJhcmdzIiwicGFnZSIsIm5ld1BhZ2UiLCJvbiIsInJlcXVlc3QiLCJ0cmFja2VyUGF0dGVybnMiLCJzb21lIiwicGF0dGVybiIsInRlc3QiLCJjb29raWVBY2Nlc3NEZXRlY3Rpb25TY3JpcHQiLCJldmFsdWF0ZU9uTmV3RG9jdW1lbnQiLCJnb3RvIiwid2FpdFVudGlsIiwidGltZW91dCIsIm5hdkVycm9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY29va2llQWN0aXZpdHkiLCJldmFsdWF0ZSIsImNvb2tpZVJlYWQiLCJ3aW5kb3ciLCJjb29raWVXcml0dGVuIiwic3RvcmFnZUFjdGl2aXR5IiwibG9jYWxTdG9yYWdlQWNjZXNzZWQiLCJzZXNzaW9uU3RvcmFnZUFjY2Vzc2VkIiwibG9jYWxTdG9yYWdlSXRlbXMiLCJPYmplY3QiLCJrZXlzIiwibG9jYWxTdG9yYWdlIiwibGVuZ3RoIiwic2Vzc2lvblN0b3JhZ2VJdGVtcyIsInNlc3Npb25TdG9yYWdlIiwidGhpcmRQYXJ0eVNjcmlwdHMiLCJBcnJheSIsImZyb20iLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZmlsdGVyIiwic2NyaXB0Iiwic3JjIiwibWFwIiwia25vd25UcmFja2VycyIsImZvckVhY2giLCJzY3JpcHRVcmwiLCJrZXkiLCJuYW1lIiwiZW50cmllcyIsImZpbmdlcnByaW50aW5nTWV0aG9kcyIsIm1ldGhvZHMiLCJjcmVhdGVFbGVtZW50IiwiZ2V0Q29udGV4dCIsInB1c2giLCJSVENQZWVyQ29ubmVjdGlvbiIsIm5hdmlnYXRvciIsIm1lZGlhRGV2aWNlcyIsImVudW1lcmF0ZURldmljZXMiLCJtZXRob2QiLCJub2RlcyIsImNsb3NlIiwiY2F0Y2giLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./tracker.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();